<!--
 * @Author: GiteapH 1046664571@qq.com
 * @Date: 2023-06-19 13:58:39
 * @LastEditors: GiteapH 1046664571@qq.com
 * @LastEditTime: 2023-08-07 13:51:35
 * @FilePath: \vue-web\src\views\picture\basePersonal.vue
 * @Description: 
 * 
 * Copyright (c) 2023 by GiteapH 1046664571@qq.com, All Rights Reserved. 
-->
<template>
  <Layout>
    <template #content>
      <el-row style="margin-bottom: 10px">
        <el-col :span="24">
          <el-form :inline="true">
            <el-form-item label="基于的rfm模型时间">
              <el-select
                @change="modelChange"
                v-model="model"
                style="margin-bottom: 15px"
              >
                <el-option label="基于全部日期的模型" value="1"> </el-option>
                <el-option label="基于最近一月的模型" value="2"> </el-option>
              </el-select>
            </el-form-item>
            <el-form-item label="用户选择">
              <el-input
                v-model="userInfo.userId"
                filterable
                placeholder="请选择用户"
                :min="1"
                style="margin-bottom: 15px"
                :max="1608708"
                controls-position="right"
                :disabled="disabled"
                @keyup.enter.native="userChange"
                type="number"
              >
              </el-input>
            </el-form-item>
            <el-form-item label="线上推理">
              <el-button
                text
                bg
                type="primary"
                @click="timeWindowVisible = true"
                style="margin-bottom: 15px"
              >
                用户价值/流失率/回归率预测
              </el-button>
              <el-dialog
                v-model="timeWindowVisible"
                title="预测周期"
                width="20%"
                style="margin-bottom: 15px"
              >
                <template #default>
                  <el-input-number v-model="time_window"></el-input-number>
                  <el-dialog
                    v-model="resultVisible"
                    width="50%"
                    title="推理结果"
                    append-to-body
                  >
                    <el-descriptions
                      class="margin-top"
                      title="线上预测"
                      :column="3"
                      border
                    >
                      <template #extra>
                        <el-button
                          type="primary"
                          @click="doForecast"
                          :disabled="forecast.BackLoading"
                          >开始推理</el-button
                        >
                      </template>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon :style="iconStyle">
                              <User />
                            </el-icon>
                            用户id
                          </div>
                        </template>
                        {{ userInfo.userId }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon :style="iconStyle">
                              <el-icon>
                                <Female />
                              </el-icon>
                            </el-icon>
                            用户性别
                          </div>
                        </template>
                        {{ userInfo.gender }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon>
                              <Histogram />
                            </el-icon>
                            年龄
                          </div>
                        </template>
                        {{ userInfo.age }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <svg
                              t="1688296566723"
                              class="icon"
                              viewBox="0 0 1024 1024"
                              version="1.1"
                              xmlns="http://www.w3.org/2000/svg"
                              p-id="879"
                              width="15"
                              height="15"
                            >
                              <path
                                d="M1014.2 967.9 841.8 795.4C915.4 711.1 960 600.7 960 480 960 214.9 745.1 0 480 0S0 214.9 0 480s214.9 480 480 480c121.3 0 232.1-45 316.6-119.2L969 1013.1c6.2 6.2 14.4 9.4 22.6 9.4s16.4-3.1 22.6-9.4C1026.7 1000.6 1026.7 980.4 1014.2 967.9zM480 896c-56.2 0-110.7-11-161.9-32.7-49.5-20.9-94-51-132.3-89.2s-68.2-82.7-89.2-132.3C75 590.7 64 536.2 64 480s11-110.7 32.7-161.9c20.9-49.5 51-94 89.2-132.2s82.7-68.2 132.3-89.2C369.3 75 423.8 64 480 64c56.2 0 110.7 11 161.9 32.7 49.5 20.9 94 51 132.3 89.2s68.2 82.7 89.2 132.2C885 369.3 896 423.8 896 480s-11 110.7-32.7 161.9c-20.9 49.5-51 94-89.2 132.3s-82.7 68.2-132.3 89.2C590.7 885 536.2 896 480 896z"
                                p-id="880"
                              ></path>
                              <path
                                d="M708.7 511.9c22.8-34.8 35.3-80.7 35.3-129.2 0-47.9-12.4-92.8-34.9-126.4-27.4-40.8-68.7-63.3-116.3-63.3L340.6 193c-22.6 0-43.9 9-59.9 25.3-15.9 16.1-24.7 37.4-24.7 59.8l0 501.2c0 17.7 14.3 32 32 32s32-14.3 32-32L320 577.4l128.2 0L661 790.1c6.2 6.3 14.4 9.4 22.6 9.4 8.2 0 16.4-3.1 22.6-9.4 12.5-12.5 12.5-32.8 0-45.3L538.7 577.4l54 0C639.9 577.4 681.1 554.1 708.7 511.9zM320 278.1c0-11.2 9.6-21.1 20.6-21.1l252.1 0c26.4 0 47.6 11.8 63.2 35 15.3 22.9 24.1 56 24.1 90.8 0 52.5-23.2 130.6-87.3 130.6L320 513.4 320 278.1z"
                                p-id="881"
                              ></path>
                            </svg>
                            rfm群体
                          </div>
                        </template>
                        {{ userInfo.rfmTag }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <svg
                              t="1688296640549"
                              class="icon"
                              viewBox="0 0 1099 1024"
                              version="1.1"
                              xmlns="http://www.w3.org/2000/svg"
                              p-id="1931"
                              width="20"
                              height="20"
                            >
                              <path
                                d="M805.56 253c-28.7 0-52 23.3-52 52 0 9.6 2.6 18.6 7.1 26.2L613.16 538.7c-3.3-0.7-6.7-1-10.1-1-10.4 0-20.2 3.1-28.3 8.4l-103.1-66.3c0-0.4 0-0.9 0-1.3 0-28.7-23.3-52-52-52-28.7 0-52 23.3-52 52 0 8.1 1.8 15.8 5.2 22.7L270.46 657c-2.7-0.4-5.5-0.7-8.3-0.7-28.7 0-52 23.3-52 52 0 28.7 23.3 52 52 52s52-23.3 52-52c0-10.3-3-19.8-8.1-27.9l100-151.9c4.4 1.2 9 1.8 13.8 1.8 12.6 0 24.2-4.5 33.2-12l98.8 63.5c-0.4 2.5-0.6 5.1-0.6 7.7 0 28.7 23.3 52 52 52s52-23.3 52-52c0-9.6-2.6-18.6-7.1-26.2l147.6-207.5c3.3 0.7 6.7 1 10.1 1 28.7 0 52-23.3 52-52S834.26 253 805.56 253z"
                                p-id="1932"
                              ></path>
                            </svg>
                            状态
                          </div>
                        </template>
                        {{ userInfo.status }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon>
                              <LocationInformation />
                            </el-icon>
                            地址
                          </div>
                        </template>
                        {{
                          `${userInfo.province}${userInfo.city}${userInfo.county}`
                        }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <svg
                              t="1688362881213"
                              class="icon"
                              viewBox="0 0 1024 1024"
                              version="1.1"
                              xmlns="http://www.w3.org/2000/svg"
                              p-id="1760"
                              width="15"
                              height="15"
                            >
                              <path
                                d="M513 912.5L97 384.1l199.5-261h433l197.5 261z"
                                fill="#FFFFFF"
                                p-id="1761"
                              ></path>
                              <path
                                d="M513 920.6L90.7 384.1l203.4-266H732l1.5 2 199.8 264.1L513 920.6zM103.3 384.1L513 904.4 920.7 384 727 128.1H299l-195.7 256z"
                                fill=""
                                p-id="1762"
                              ></path>
                              <path
                                d="M513 912.5L297 384.1l99.5-261h233l97.5 261z"
                                fill="#FFFFFF"
                                p-id="1763"
                              ></path>
                              <path
                                d="M513 925.8L291.6 384.2 393 118.1h240l99.4 266.1L513 925.8zM302.4 384L513 899.2 721.6 384 626 128.1H400L302.4 384z"
                                fill=""
                                p-id="1764"
                              ></path>
                              <path
                                d="M97 379.1h830v10H97z"
                                fill=""
                                p-id="1765"
                              ></path>
                            </svg>
                            预测价值
                          </div>
                        </template>
                        <p
                          v-loading="forecast.PriceLoading"
                          :style="{
                            color: `${forecast.Price.warn ? 'orange' : 'red'}`,
                          }"
                        >
                          {{ forecast.Price.prediction }}
                        </p>
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <svg
                              t="1688362925306"
                              class="icon"
                              viewBox="0 0 1024 1024"
                              version="1.1"
                              xmlns="http://www.w3.org/2000/svg"
                              p-id="4170"
                              width="15"
                              height="15"
                            >
                              <path
                                d="M647.17 883.69H153.71a27.59 27.59 0 1 1 0-55.18h493.46c113.5 0 205.84-92.34 205.84-205.84s-92.34-205.84-205.84-205.84H200.86a27.6 27.6 0 1 1 0-55.19h446.31c69.46 0 134.94 27.22 184.37 76.65s76.65 114.91 76.65 184.38S881 757.61 831.54 807s-114.91 76.69-184.37 76.69z"
                                fill="#142E4F"
                                p-id="4171"
                              ></path>
                              <path
                                d="M413.56 657.25a27.47 27.47 0 0 1-18.2-6.87L125.19 413a27.58 27.58 0 0 1 0.07-41.51l257.07-224.38a27.59 27.59 0 1 1 36.29 41.58L185.28 392.3l246.51 216.63a27.59 27.59 0 0 1-18.23 48.32z"
                                fill="#FF9600"
                                p-id="4172"
                              ></path>
                            </svg>
                            预测回归率(用户如果流失后回归的概率)
                          </div>
                        </template>
                        <p
                          v-loading="forecast.LossLoading"
                          :style="{
                            color: `${forecast.Loss.warn ? 'orange' : 'red'}`,
                          }"
                        >
                          {{ forecast.Back.prediction }}
                        </p>
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <svg
                              t="1688362942394"
                              class="icon"
                              viewBox="0 0 1024 1024"
                              version="1.1"
                              xmlns="http://www.w3.org/2000/svg"
                              p-id="4423"
                              width="15"
                              height="15"
                            >
                              <path
                                d="M700.8 352c12.8-83.2-25.6-163.2-102.4-201.6-73.6-38.4-166.4-25.6-224 35.2s-73.6 150.4-35.2 224 121.6 115.2 204.8 99.2c16-3.2 28.8-6.4 41.6-12.8 12.8-9.6 28.8-19.2 41.6-25.6 38.4-28.8 67.2-70.4 73.6-118.4zM480 704c0-48 12.8-96 38.4-134.4-54.4 0-112-16-156.8-48-16-12.8-41.6-12.8-60.8-3.2-108.8 70.4-172.8 192-172.8 320 0 0-3.2 57.6 28.8 57.6h409.6c-51.2-48-86.4-115.2-86.4-192zM828.8 592c-3.2-12.8-12.8-22.4-22.4-32-9.6-9.6-22.4-16-38.4-22.4-16-6.4-35.2-9.6-54.4-9.6-16 0-32 3.2-48 9.6-12.8 6.4-25.6 16-38.4 25.6-9.6 9.6-19.2 22.4-22.4 38.4-6.4 12.8-9.6 41.6-9.6 44.8 0 3.2 0 9.6 3.2 12.8 3.2 3.2 6.4 6.4 12.8 6.4H672c9.6 0 16-6.4 16-16 0-6.4 0-12.8 3.2-16 0-3.2 3.2-9.6 6.4-12.8 3.2-3.2 3.2-6.4 6.4-6.4 3.2-3.2 6.4-3.2 12.8-3.2 9.6 0 12.8 3.2 16 3.2 3.2 3.2 3.2 12.8 3.2 16 0 3.2 0 6.4-3.2 9.6l-9.6 9.6c-3.2 3.2-9.6 6.4-12.8 12.8-6.4 3.2-12.8 9.6-19.2 16-6.4 6.4-9.6 16-16 25.6-3.2 9.6-6.4 22.4-9.6 35.2v19.2c0 9.6 6.4 16 16 16h57.6c9.6 0 16-6.4 16-16v-12.8c0-6.4 3.2-9.6 6.4-12.8 3.2-3.2 6.4-9.6 12.8-12.8 6.4-3.2 9.6-9.6 16-12.8l19.2-19.2c6.4-6.4 12.8-16 16-25.6 3.2-9.6 6.4-22.4 6.4-38.4 3.2-9.6 0-19.2-3.2-32zM732.8 800h-32c-19.2 0-32 12.8-32 32v32c0 19.2 12.8 32 32 32h32c19.2 0 32-12.8 32-32v-32c0-19.2-16-32-32-32z"
                                fill="#4088FF"
                                p-id="4424"
                              ></path>
                            </svg>
                            预测流失率(用户流失的概率)
                          </div>
                        </template>
                        <p
                          v-loading="forecast.LossLoading"
                          :style="{
                            color: `${forecast.Loss.warn ? 'orange' : 'red'}`,
                          }"
                        >
                          {{ forecast.Loss.prediction }}
                        </p>
                      </el-descriptions-item>
                    </el-descriptions>
                    <el-button
                      type="primary"
                      style="margin-top: 15px"
                      @click="forecast.Back.show = !forecast.Back.show"
                      v-if="forecast.Back.prediction != 0"
                      >{{ forecast.Back.show ? "隐藏" : "显示" }}</el-button
                    >
                    <el-descriptions
                      class="margin-top"
                      title="特征值"
                      :column="3"
                      border
                      v-if="forecast.Back.show && forecast.Back.prediction != 0"
                    >
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon :style="iconStyle">
                              <User />
                            </el-icon>
                            用户id
                          </div>
                        </template>
                        {{ userInfo.userId }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon :style="iconStyle">
                              <el-icon>
                                <Female />
                              </el-icon>
                            </el-icon>
                            用户性别
                          </div>
                        </template>
                        {{ forecast.Back.gender }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon>
                              <Histogram />
                            </el-icon>
                            年龄
                          </div>
                        </template>
                        {{ userInfo.age }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <svg
                              t="1688296566723"
                              class="icon"
                              viewBox="0 0 1024 1024"
                              version="1.1"
                              xmlns="http://www.w3.org/2000/svg"
                              p-id="879"
                              width="15"
                              height="15"
                            >
                              <path
                                d="M1014.2 967.9 841.8 795.4C915.4 711.1 960 600.7 960 480 960 214.9 745.1 0 480 0S0 214.9 0 480s214.9 480 480 480c121.3 0 232.1-45 316.6-119.2L969 1013.1c6.2 6.2 14.4 9.4 22.6 9.4s16.4-3.1 22.6-9.4C1026.7 1000.6 1026.7 980.4 1014.2 967.9zM480 896c-56.2 0-110.7-11-161.9-32.7-49.5-20.9-94-51-132.3-89.2s-68.2-82.7-89.2-132.3C75 590.7 64 536.2 64 480s11-110.7 32.7-161.9c20.9-49.5 51-94 89.2-132.2s82.7-68.2 132.3-89.2C369.3 75 423.8 64 480 64c56.2 0 110.7 11 161.9 32.7 49.5 20.9 94 51 132.3 89.2s68.2 82.7 89.2 132.2C885 369.3 896 423.8 896 480s-11 110.7-32.7 161.9c-20.9 49.5-51 94-89.2 132.3s-82.7 68.2-132.3 89.2C590.7 885 536.2 896 480 896z"
                                p-id="880"
                              ></path>
                              <path
                                d="M708.7 511.9c22.8-34.8 35.3-80.7 35.3-129.2 0-47.9-12.4-92.8-34.9-126.4-27.4-40.8-68.7-63.3-116.3-63.3L340.6 193c-22.6 0-43.9 9-59.9 25.3-15.9 16.1-24.7 37.4-24.7 59.8l0 501.2c0 17.7 14.3 32 32 32s32-14.3 32-32L320 577.4l128.2 0L661 790.1c6.2 6.3 14.4 9.4 22.6 9.4 8.2 0 16.4-3.1 22.6-9.4 12.5-12.5 12.5-32.8 0-45.3L538.7 577.4l54 0C639.9 577.4 681.1 554.1 708.7 511.9zM320 278.1c0-11.2 9.6-21.1 20.6-21.1l252.1 0c26.4 0 47.6 11.8 63.2 35 15.3 22.9 24.1 56 24.1 90.8 0 52.5-23.2 130.6-87.3 130.6L320 513.4 320 278.1z"
                                p-id="881"
                              ></path>
                            </svg>
                            rfm群体
                          </div>
                        </template>
                        {{ forecast.Back.rfm_tag }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <svg
                              t="1688296640549"
                              class="icon"
                              viewBox="0 0 1099 1024"
                              version="1.1"
                              xmlns="http://www.w3.org/2000/svg"
                              p-id="1931"
                              width="20"
                              height="20"
                            >
                              <path
                                d="M805.56 253c-28.7 0-52 23.3-52 52 0 9.6 2.6 18.6 7.1 26.2L613.16 538.7c-3.3-0.7-6.7-1-10.1-1-10.4 0-20.2 3.1-28.3 8.4l-103.1-66.3c0-0.4 0-0.9 0-1.3 0-28.7-23.3-52-52-52-28.7 0-52 23.3-52 52 0 8.1 1.8 15.8 5.2 22.7L270.46 657c-2.7-0.4-5.5-0.7-8.3-0.7-28.7 0-52 23.3-52 52 0 28.7 23.3 52 52 52s52-23.3 52-52c0-10.3-3-19.8-8.1-27.9l100-151.9c4.4 1.2 9 1.8 13.8 1.8 12.6 0 24.2-4.5 33.2-12l98.8 63.5c-0.4 2.5-0.6 5.1-0.6 7.7 0 28.7 23.3 52 52 52s52-23.3 52-52c0-9.6-2.6-18.6-7.1-26.2l147.6-207.5c3.3 0.7 6.7 1 10.1 1 28.7 0 52-23.3 52-52S834.26 253 805.56 253z"
                                p-id="1932"
                              ></path>
                            </svg>
                            状态
                          </div>
                        </template>
                        {{ userInfo.status }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon>
                              <LocationInformation />
                            </el-icon>
                            省份
                          </div>
                        </template>
                        {{ forecast.Back.provinceVec }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon>
                              <LocationInformation />
                            </el-icon>
                            城市
                          </div>
                        </template>
                        {{ forecast.Back.cityVec }}
                      </el-descriptions-item>
                      <el-descriptions-item>
                        <template #label>
                          <div class="cell-item">
                            <el-icon>
                              <LocationInformation />
                            </el-icon>
                            预测窗口时间
                          </div>
                        </template>
                        {{ forecast.Back.time_window }}
                      </el-descriptions-item>
                    </el-descriptions>
                  </el-dialog>
                </template>
                <template #footer>
                  <div class="dialog-footer">
                    <el-button @click="aOpen(false)">取消</el-button>
                    <el-button type="primary" @click="aOpen(true)">
                      准备推理
                    </el-button>
                  </div>
                </template>
              </el-dialog>
            </el-form-item>
            <el-form-item label="用户报告">
              <input
                type="file"
                id="module"
                accept=".docx"
                style="margin-bottom: 15px"
                @change="docxChange"
              />
              <el-button
                text
                bg
                type="primary"
                @click="docxUpload"
                style="margin-bottom: 15px"
                >上传模板word生成报告</el-button
              >
            </el-form-item>
            <el-form-item label="用户营销策略">
              <el-button
                text
                bg
                type="primary"
                @click="analysisVisible = true"
                style="margin-bottom: 15px"
              >
                用户营销策略
              </el-button>
              <el-dialog
                v-model="analysisVisible"
                title="用户营销策略"
                width="50%"
                center
              >
                <userAnalysis
                  ref="userAnalysisRef"
                  :user="userInfo.userId"
                  :cardInfo="cardInfo"
                  :ruleInfo="ruleInfo"
                  :userInfo="userInfo"
                  :forecast="forecastGPT"
                ></userAnalysis>
                <template #footer>
                  <span class="dialog-footer">
                    <el-button @click="analysisVisible = false">取消</el-button>
                    <el-button type="primary" @click="analysisVisible = false">
                      取消
                    </el-button>
                  </span>
                </template>
              </el-dialog>
            </el-form-item>
          </el-form>
        </el-col>
      </el-row>
      <p class="p_h">基础信息</p>
      <el-row justify="space-between" style="margin-top: 15px">
        <el-col :span="5">
          <card
            :value="userInfo.gender"
            label="性别"
            background="#1296db"
            :is-num="false"
          >
            <template #svgLeave>
              <svg
                t="1684042316234"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="2456"
                width="45"
                height="45"
              >
                <path
                  d="M285.257143 563.2C131.657143 563.2 0 431.542857 0 285.257143S131.657143 0 285.257143 0s285.257143 131.657143 285.257143 285.257143-138.971429 277.942857-285.257143 277.942857z m453.485714 460.8c-153.6 0-277.942857-131.657143-277.942857-285.257143S585.142857 460.8 738.742857 460.8 1024 585.142857 1024 738.742857 899.657143 1024 738.742857 1024zM716.8 102.4h51.2V512h-51.2V102.4M614.4 212.114286h256v51.2H614.4M256 512h51.2v409.6h-51.2V512z m-21.942857 321.828571l182.857143-7.314285-131.657143 131.657143-131.657143-117.028572h219.428571"
                  fill="#1296db"
                  p-id="2457"
                ></path>
              </svg>
            </template>
            <template #svgmove>
              <svg
                t="1684042316234"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="2456"
                width="45"
                height="45"
              >
                <path
                  d="M285.257143 563.2C131.657143 563.2 0 431.542857 0 285.257143S131.657143 0 285.257143 0s285.257143 131.657143 285.257143 285.257143-138.971429 277.942857-285.257143 277.942857z m453.485714 460.8c-153.6 0-277.942857-131.657143-277.942857-285.257143S585.142857 460.8 738.742857 460.8 1024 585.142857 1024 738.742857 899.657143 1024 738.742857 1024zM716.8 102.4h51.2V512h-51.2V102.4M614.4 212.114286h256v51.2H614.4M256 512h51.2v409.6h-51.2V512z m-21.942857 321.828571l182.857143-7.314285-131.657143 131.657143-131.657143-117.028572h219.428571"
                  fill="#e6e6e6"
                  p-id="2457"
                ></path>
              </svg>
            </template>
          </card>
        </el-col>
        <el-col :span="5">
          <card
            :value="userInfo.province + userInfo.city + userInfo.county"
            label="地址"
            background="#25b2c0"
            :is-num="false"
          >
            <template #svgLeave>
              <svg
                t="1684239516258"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="2806"
                width="45"
                height="45"
              >
                <path
                  d="M512 74.887967c183.767635 0 332.481328 148.713693 332.481328 333.012448 0 132.248963-173.145228 396.746888-269.278008 510.937759-15.93361 18.589212-38.771784 29.211618-63.20332 29.211619-23.900415 0-47.80083-10.622407-63.20332-29.211619-96.6639-114.190871-269.278008-378.157676-269.278008-510.937759 0-183.236515 148.713693-333.012448 332.481328-333.012448z m15.40249 804.116182c103.568465-122.688797 254.406639-367.004149 254.406639-470.572614 0-149.244813-121.095436-270.340249-269.809129-270.340249S241.659751 258.655602 241.659751 408.431535c0 103.568465 150.838174 347.883817 254.406639 470.572614 4.248963 4.780083 9.560166 7.435685 15.40249 7.435685 6.904564 0 12.215768-2.655602 15.93361-7.435685zM512 242.721992c80.73029 0 145.526971 65.327801 145.526971 145.526971s-65.327801 145.526971-145.526971 145.526971C431.26971 533.775934 366.473029 468.448133 366.473029 388.248963c0-80.73029 64.79668-145.526971 145.526971-145.526971z m0 228.912863c45.676349 0 83.385892-37.709544 83.385892-83.385892S557.676349 304.863071 512 304.863071s-83.385892 37.709544-83.385892 83.385892 37.178423 83.385892 83.385892 83.385892z"
                  p-id="2807"
                  fill="#25b2c0"
                ></path>
              </svg>
            </template>
            <template #svgmove>
              <svg
                t="1684239516258"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="2806"
                width="45"
                height="45"
              >
                <path
                  d="M512 74.887967c183.767635 0 332.481328 148.713693 332.481328 333.012448 0 132.248963-173.145228 396.746888-269.278008 510.937759-15.93361 18.589212-38.771784 29.211618-63.20332 29.211619-23.900415 0-47.80083-10.622407-63.20332-29.211619-96.6639-114.190871-269.278008-378.157676-269.278008-510.937759 0-183.236515 148.713693-333.012448 332.481328-333.012448z m15.40249 804.116182c103.568465-122.688797 254.406639-367.004149 254.406639-470.572614 0-149.244813-121.095436-270.340249-269.809129-270.340249S241.659751 258.655602 241.659751 408.431535c0 103.568465 150.838174 347.883817 254.406639 470.572614 4.248963 4.780083 9.560166 7.435685 15.40249 7.435685 6.904564 0 12.215768-2.655602 15.93361-7.435685zM512 242.721992c80.73029 0 145.526971 65.327801 145.526971 145.526971s-65.327801 145.526971-145.526971 145.526971C431.26971 533.775934 366.473029 468.448133 366.473029 388.248963c0-80.73029 64.79668-145.526971 145.526971-145.526971z m0 228.912863c45.676349 0 83.385892-37.709544 83.385892-83.385892S557.676349 304.863071 512 304.863071s-83.385892 37.709544-83.385892 83.385892 37.178423 83.385892 83.385892 83.385892z"
                  p-id="2807"
                  fill="#e6e6e6"
                ></path>
              </svg>
            </template>
          </card>
        </el-col>
        <el-col :span="5">
          <card
            :value="userInfo.age"
            label="年龄"
            background="#04ba92"
            :is-num="true"
            suffix="岁"
          >
            <template #svgLeave>
              <svg
                t="1684240437201"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="3274"
                width="45"
                height="45"
              >
                <path
                  d="M312.888889 113.777778h56.888889v56.888889h-56.888889zM483.555556 113.777778h56.888888v56.888889h-56.888888zM654.222222 113.777778h56.888889v56.888889h-56.888889zM312.888889 227.555556h56.888889v199.111111h-56.888889zM483.555556 227.555556h56.888888v199.111111h-56.888888zM654.222222 227.555556h56.888889v199.111111h-56.888889z"
                  fill="#04ba92"
                  p-id="3275"
                ></path>
                <path
                  d="M824.888889 853.333333V483.555556a28.444444 28.444444 0 0 0-28.444445-28.444445H227.555556a28.444444 28.444444 0 0 0-28.444445 28.444445v369.777777h625.777778zM227.555556 398.222222h568.888888a85.333333 85.333333 0 0 1 85.333334 85.333334v426.666666H142.222222V483.555556a85.333333 85.333333 0 0 1 85.333334-85.333334z"
                  fill="#04ba92"
                  p-id="3276"
                ></path>
                <path
                  d="M28.444444 853.333333h967.111112v56.888889H28.444444z"
                  fill="#04ba92"
                  p-id="3277"
                ></path>
              </svg>
            </template>
            <template #svgmove>
              <svg
                t="1684240437201"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="3274"
                width="45"
                height="45"
              >
                <path
                  d="M312.888889 113.777778h56.888889v56.888889h-56.888889zM483.555556 113.777778h56.888888v56.888889h-56.888888zM654.222222 113.777778h56.888889v56.888889h-56.888889zM312.888889 227.555556h56.888889v199.111111h-56.888889zM483.555556 227.555556h56.888888v199.111111h-56.888888zM654.222222 227.555556h56.888889v199.111111h-56.888889z"
                  fill="#e6e6e6"
                  p-id="3275"
                ></path>
                <path
                  d="M824.888889 853.333333V483.555556a28.444444 28.444444 0 0 0-28.444445-28.444445H227.555556a28.444444 28.444444 0 0 0-28.444445 28.444445v369.777777h625.777778zM227.555556 398.222222h568.888888a85.333333 85.333333 0 0 1 85.333334 85.333334v426.666666H142.222222V483.555556a85.333333 85.333333 0 0 1 85.333334-85.333334z"
                  fill="#e6e6e6"
                  p-id="3276"
                ></path>
                <path
                  d="M28.444444 853.333333h967.111112v56.888889H28.444444z"
                  fill="#e6e6e6"
                  p-id="3277"
                ></path>
              </svg>
            </template>
          </card>
        </el-col>
        <el-col :span="5">
          <card
            :value="userInfo.status"
            label="状态"
            background="#71c83c"
            :is-num="false"
            v-loading="statusLoading"
          >
            <template #svgLeave>
              <svg
                t="1684240646517"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="4502"
                width="45"
                height="45"
              >
                <path
                  d="M209.513187 890.861078c-62.613136 0-113.529313-50.916177-113.529313-113.529313L95.983874 278.834873c0-62.613136 50.916177-113.529313 113.529313-113.529313L832.548295 165.30556c62.613136 0 113.529313 50.916177 113.529313 113.529313l0 498.496892c0 62.613136-50.916177 113.529313-113.529313 113.529313L209.513187 890.861078zM209.513187 226.198555c-28.898371 0-52.636318 23.565933-52.636318 52.636318l0 498.496892c0 28.898371 23.565933 52.636318 52.636318 52.636318L832.548295 829.968083c28.898371 0 52.636318-23.565933 52.636318-52.636318L885.184613 278.834873c0-28.898371-23.565933-52.636318-52.636318-52.636318L209.513187 226.198555zM791.092894 703.88174c-16.857383 0-30.446498-13.761129-30.446498-30.446498 0-51.948261-42.143457-94.091718-94.091718-94.091718s-94.091718 42.143457-94.091718 94.091718c0 16.857383-13.761129 30.446498-30.446498 30.446498-16.857383 0-30.446498-13.761129-30.446498-30.446498 0-53.15236 27.350244-102.176382 72.417941-130.55871-19.781623-20.985721-30.790526-48.507979-30.790526-77.234336 0-62.613136 50.916177-113.529313 113.529313-113.529313s113.529313 50.916177 113.529313 113.529313c0 28.726356-11.180917 56.0766-30.790526 77.234336 44.895683 28.382328 72.417941 77.234336 72.417941 130.55871C821.711406 690.120611 807.950277 703.88174 791.092894 703.88174zM666.554678 413.177893c-28.898371 0-52.636318 23.565933-52.636318 52.636318s23.565933 52.636318 52.636318 52.636318c29.070385 0 52.636318-23.565933 52.636318-52.636318S695.453049 413.177893 666.554678 413.177893z"
                  fill="#71c83c"
                  p-id="4503"
                ></path>
                <path
                  d="M434.507643 413.86595 248.216361 413.86595c-17.717453 0-31.994625-14.277171-31.994625-31.994625 0-17.717453 14.277171-31.994625 31.994625-31.994625l186.291282 0c17.717453 0 31.994625 14.277171 31.994625 31.994625C466.502268 399.588779 452.225097 413.86595 434.507643 413.86595z"
                  fill="#71c83c"
                  p-id="4504"
                ></path>
                <path
                  d="M434.507643 559.90593 248.216361 559.90593c-17.717453 0-31.994625-14.277171-31.994625-31.994625s14.277171-31.994625 31.994625-31.994625l186.291282 0c17.717453 0 31.994625 14.277171 31.994625 31.994625S452.225097 559.90593 434.507643 559.90593z"
                  fill="#71c83c"
                  p-id="4505"
                ></path>
                <path
                  d="M434.507643 704.397783 248.216361 704.397783c-17.717453 0-31.994625-14.277171-31.994625-31.994625s14.277171-31.994625 31.994625-31.994625l186.291282 0c17.717453 0 31.994625 14.277171 31.994625 31.994625S452.225097 704.397783 434.507643 704.397783z"
                  fill="#71c83c"
                  p-id="4506"
                ></path>
              </svg>
            </template>
            <template #svgmove>
              <svg
                t="1684240646517"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="4502"
                width="45"
                height="45"
              >
                <path
                  d="M209.513187 890.861078c-62.613136 0-113.529313-50.916177-113.529313-113.529313L95.983874 278.834873c0-62.613136 50.916177-113.529313 113.529313-113.529313L832.548295 165.30556c62.613136 0 113.529313 50.916177 113.529313 113.529313l0 498.496892c0 62.613136-50.916177 113.529313-113.529313 113.529313L209.513187 890.861078zM209.513187 226.198555c-28.898371 0-52.636318 23.565933-52.636318 52.636318l0 498.496892c0 28.898371 23.565933 52.636318 52.636318 52.636318L832.548295 829.968083c28.898371 0 52.636318-23.565933 52.636318-52.636318L885.184613 278.834873c0-28.898371-23.565933-52.636318-52.636318-52.636318L209.513187 226.198555zM791.092894 703.88174c-16.857383 0-30.446498-13.761129-30.446498-30.446498 0-51.948261-42.143457-94.091718-94.091718-94.091718s-94.091718 42.143457-94.091718 94.091718c0 16.857383-13.761129 30.446498-30.446498 30.446498-16.857383 0-30.446498-13.761129-30.446498-30.446498 0-53.15236 27.350244-102.176382 72.417941-130.55871-19.781623-20.985721-30.790526-48.507979-30.790526-77.234336 0-62.613136 50.916177-113.529313 113.529313-113.529313s113.529313 50.916177 113.529313 113.529313c0 28.726356-11.180917 56.0766-30.790526 77.234336 44.895683 28.382328 72.417941 77.234336 72.417941 130.55871C821.711406 690.120611 807.950277 703.88174 791.092894 703.88174zM666.554678 413.177893c-28.898371 0-52.636318 23.565933-52.636318 52.636318s23.565933 52.636318 52.636318 52.636318c29.070385 0 52.636318-23.565933 52.636318-52.636318S695.453049 413.177893 666.554678 413.177893z"
                  fill="#e6e6e6"
                  p-id="4503"
                ></path>
                <path
                  d="M434.507643 413.86595 248.216361 413.86595c-17.717453 0-31.994625-14.277171-31.994625-31.994625 0-17.717453 14.277171-31.994625 31.994625-31.994625l186.291282 0c17.717453 0 31.994625 14.277171 31.994625 31.994625C466.502268 399.588779 452.225097 413.86595 434.507643 413.86595z"
                  fill="#e6e6e6"
                  p-id="4504"
                ></path>
                <path
                  d="M434.507643 559.90593 248.216361 559.90593c-17.717453 0-31.994625-14.277171-31.994625-31.994625s14.277171-31.994625 31.994625-31.994625l186.291282 0c17.717453 0 31.994625 14.277171 31.994625 31.994625S452.225097 559.90593 434.507643 559.90593z"
                  fill="#e6e6e6"
                  p-id="4505"
                ></path>
                <path
                  d="M434.507643 704.397783 248.216361 704.397783c-17.717453 0-31.994625-14.277171-31.994625-31.994625s14.277171-31.994625 31.994625-31.994625l186.291282 0c17.717453 0 31.994625 14.277171 31.994625 31.994625S452.225097 704.397783 434.507643 704.397783z"
                  fill="#e6e6e6"
                  p-id="4506"
                ></path>
              </svg>
            </template>
          </card>
        </el-col>
      </el-row>
      <p class="p_h">统计信息</p>
      <el-row :gutter="20" style="margin-top: 15px; margin-bottom: 10px">
        <el-col :span="5">
          <card
            :value="userInfo.rfmTag"
            label="所属rfm用户群"
            background="#FFC65F"
            :is-num="false"
          >
            <template #svgLeave>
              <svg
                t="1684240803150"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="5493"
                width="45"
                height="45"
              >
                <path
                  d="M922.624 934.4h-43.52v-25.6h17.92V890.88h25.6zM820.736 934.4h-58.368v-25.6h58.368v25.6z m-116.736 0h-58.368v-25.6h58.368v25.6z m-116.224 0h-58.368v-25.6h58.368v25.6z m-116.736 0H412.672v-25.6H471.04v25.6z m-116.736 0H295.936v-25.6h58.368v25.6z m-116.224 0H179.712v-25.6h58.368v25.6zM121.344 934.4h-43.52V890.88h25.6v17.92h17.92zM103.424 832.512h-25.6v-58.368h25.6v58.368z m0-116.736h-25.6v-58.368h25.6v58.368z m0-116.224h-25.6v-58.368h25.6v58.368z m0-116.736h-25.6V424.448h25.6v58.368z m0-116.736h-25.6V308.224h25.6v57.856z m0-116.224h-25.6V191.488h25.6v58.368zM103.424 133.12h-25.6v-43.52h43.52v25.6h-17.92zM820.736 115.2h-58.368v-25.6h58.368v25.6z m-116.736 0h-58.368v-25.6h58.368v25.6z m-116.224 0h-58.368v-25.6h58.368v25.6z m-116.736 0H412.672v-25.6H471.04v25.6z m-116.736 0H295.936v-25.6h58.368v25.6z m-116.224 0H179.712v-25.6h58.368v25.6zM922.624 133.12h-25.6v-17.92h-17.92v-25.6h43.52zM922.624 832.512h-25.6v-58.368h25.6v58.368z m0-116.736h-25.6v-58.368h25.6v58.368z m0-116.224h-25.6v-58.368h25.6v58.368z m0-116.736h-25.6V424.448h25.6v58.368z m0-116.736h-25.6V308.224h25.6v57.856z m0-116.224h-25.6V191.488h25.6v58.368z"
                  p-id="5494"
                ></path>
                <path d="M0 0h204.8v204.8H0z" fill="#297AFF" p-id="5495"></path>
                <path
                  d="M409.6 409.6h204.8v204.8H409.6z"
                  fill="#FFC65F"
                  p-id="5496"
                ></path>
                <path
                  d="M819.2 0h204.8v204.8h-204.8zM0 819.2h204.8v204.8H0zM819.2 819.2h204.8v204.8h-204.8z"
                  fill="#297AFF"
                  p-id="5497"
                ></path>
                <path
                  d="M409.6 0h204.8v204.8H409.6zM409.6 819.2h204.8v204.8H409.6zM0 409.6h204.8v204.8H0zM819.2 409.6h204.8v204.8h-204.8z"
                  fill="#FFC65F"
                  p-id="5498"
                ></path>
                <path
                  d="M205.824 223.93344l18.10432-18.10432 184.27392 184.27904-18.0992 18.0992z"
                  p-id="5499"
                ></path>
                <path
                  d="M199.68 230.4v-30.72h30.72M409.088 378.368v30.72h-30.72M220.16 500.224h174.08v25.6H220.16z"
                  p-id="5500"
                ></path>
                <path
                  d="M225.28 533.504l-20.48-20.48 20.48-20.48M389.12 533.504l20.48-20.48-20.48-20.48M629.248 500.224h174.08v25.6h-174.08z"
                  p-id="5501"
                ></path>
                <path
                  d="M634.368 533.504l-20.48-20.48 20.48-20.48M798.208 533.504l20.48-20.48-20.48-20.48M499.0976 394.3424v-174.08h25.6v174.08z"
                  p-id="5502"
                ></path>
                <path
                  d="M532.48 389.12l-20.48 20.48-20.48-20.48M532.48 225.28l-20.48-20.48-20.48 20.48M499.06688 803.97312v-174.08h25.6v174.08z"
                  p-id="5503"
                ></path>
                <path
                  d="M532.48 798.72l-20.48 20.48-20.48-20.48M532.48 634.88l-20.48-20.48-20.48 20.48M617.56416 636.5696l18.0992-18.0992 184.27904 184.27392-18.10432 18.10432z"
                  p-id="5504"
                ></path>
                <path
                  d="M611.328 643.072v-30.72h30.72M820.736 791.04v30.72h-30.72M612.352 393.2416l184.27904-184.27904 18.10432 18.10432-184.27904 184.27392z"
                  p-id="5505"
                ></path>
                <path
                  d="M820.736 233.472v-30.72h-30.72M611.328 381.44v30.72h30.72M203.29984 802.9696l184.27392-184.27904 18.10432 18.10432-184.27392 184.27392zM412.16 643.072v-30.72h-30.72"
                  p-id="5506"
                ></path>
                <path d="M202.24 791.04v30.72h30.72" p-id="5507"></path>
              </svg>
            </template>
            <template #svgmove>
              <svg
                t="1684240803150"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="5493"
                width="45"
                height="45"
              >
                <path
                  d="M922.624 934.4h-43.52v-25.6h17.92V890.88h25.6zM820.736 934.4h-58.368v-25.6h58.368v25.6z m-116.736 0h-58.368v-25.6h58.368v25.6z m-116.224 0h-58.368v-25.6h58.368v25.6z m-116.736 0H412.672v-25.6H471.04v25.6z m-116.736 0H295.936v-25.6h58.368v25.6z m-116.224 0H179.712v-25.6h58.368v25.6zM121.344 934.4h-43.52V890.88h25.6v17.92h17.92zM103.424 832.512h-25.6v-58.368h25.6v58.368z m0-116.736h-25.6v-58.368h25.6v58.368z m0-116.224h-25.6v-58.368h25.6v58.368z m0-116.736h-25.6V424.448h25.6v58.368z m0-116.736h-25.6V308.224h25.6v57.856z m0-116.224h-25.6V191.488h25.6v58.368zM103.424 133.12h-25.6v-43.52h43.52v25.6h-17.92zM820.736 115.2h-58.368v-25.6h58.368v25.6z m-116.736 0h-58.368v-25.6h58.368v25.6z m-116.224 0h-58.368v-25.6h58.368v25.6z m-116.736 0H412.672v-25.6H471.04v25.6z m-116.736 0H295.936v-25.6h58.368v25.6z m-116.224 0H179.712v-25.6h58.368v25.6zM922.624 133.12h-25.6v-17.92h-17.92v-25.6h43.52zM922.624 832.512h-25.6v-58.368h25.6v58.368z m0-116.736h-25.6v-58.368h25.6v58.368z m0-116.224h-25.6v-58.368h25.6v58.368z m0-116.736h-25.6V424.448h25.6v58.368z m0-116.736h-25.6V308.224h25.6v57.856z m0-116.224h-25.6V191.488h25.6v58.368z"
                  p-id="5494"
                ></path>
                <path d="M0 0h204.8v204.8H0z" fill="#e6e6e6" p-id="5495"></path>
                <path
                  d="M409.6 409.6h204.8v204.8H409.6z"
                  fill="#e6e6e6"
                  p-id="5496"
                ></path>
                <path
                  d="M819.2 0h204.8v204.8h-204.8zM0 819.2h204.8v204.8H0zM819.2 819.2h204.8v204.8h-204.8z"
                  fill="#e6e6e6"
                  p-id="5497"
                ></path>
                <path
                  d="M409.6 0h204.8v204.8H409.6zM409.6 819.2h204.8v204.8H409.6zM0 409.6h204.8v204.8H0zM819.2 409.6h204.8v204.8h-204.8z"
                  fill="#e6e6e6"
                  p-id="5498"
                ></path>
                <path
                  d="M205.824 223.93344l18.10432-18.10432 184.27392 184.27904-18.0992 18.0992z"
                  p-id="5499"
                ></path>
                <path
                  d="M199.68 230.4v-30.72h30.72M409.088 378.368v30.72h-30.72M220.16 500.224h174.08v25.6H220.16z"
                  p-id="5500"
                ></path>
                <path
                  d="M225.28 533.504l-20.48-20.48 20.48-20.48M389.12 533.504l20.48-20.48-20.48-20.48M629.248 500.224h174.08v25.6h-174.08z"
                  p-id="5501"
                ></path>
                <path
                  d="M634.368 533.504l-20.48-20.48 20.48-20.48M798.208 533.504l20.48-20.48-20.48-20.48M499.0976 394.3424v-174.08h25.6v174.08z"
                  p-id="5502"
                ></path>
                <path
                  d="M532.48 389.12l-20.48 20.48-20.48-20.48M532.48 225.28l-20.48-20.48-20.48 20.48M499.06688 803.97312v-174.08h25.6v174.08z"
                  p-id="5503"
                ></path>
                <path
                  d="M532.48 798.72l-20.48 20.48-20.48-20.48M532.48 634.88l-20.48-20.48-20.48 20.48M617.56416 636.5696l18.0992-18.0992 184.27904 184.27392-18.10432 18.10432z"
                  p-id="5504"
                ></path>
                <path
                  d="M611.328 643.072v-30.72h30.72M820.736 791.04v30.72h-30.72M612.352 393.2416l184.27904-184.27904 18.10432 18.10432-184.27904 184.27392z"
                  p-id="5505"
                ></path>
                <path
                  d="M820.736 233.472v-30.72h-30.72M611.328 381.44v30.72h30.72M203.29984 802.9696l184.27392-184.27904 18.10432 18.10432-184.27392 184.27392zM412.16 643.072v-30.72h-30.72"
                  p-id="5506"
                ></path>
                <path d="M202.24 791.04v30.72h30.72" p-id="5507"></path>
              </svg>
            </template>
          </card>
        </el-col>
        <el-col :span="5">
          <card
            :value="userInfo.userValue"
            label="所属clv用户群"
            background="#282c2c"
            :is-num="false"
          >
            <template #svgLeave>
              <svg
                t="1684241116606"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="6982"
                width="45"
                height="45"
              >
                <path
                  d="M0 0h1024v1024H0z"
                  fill="#282c2c"
                  fill-opacity="0"
                  p-id="6983"
                ></path>
                <path
                  d="M512 586.666667a202.666667 202.666667 0 1 0 0-405.333334 202.666667 202.666667 0 0 0 0 405.333334z m0-341.333334a138.666667 138.666667 0 1 1 0 277.333334 138.666667 138.666667 0 0 1 0-277.333334z m288 539.733334v36.949333c0.042667 35.157333-12.885333 69.12-36.352 95.274667a32 32 0 0 1-47.701333-42.666667c12.928-14.506667 20.053333-33.194667 20.010666-52.608V785.066667a114.602667 114.602667 0 0 0-85.888-112.042667 32.64 32.64 0 0 0-23.936 3.029333 235.264 235.264 0 0 1-228.138666 0 32.896 32.896 0 0 0-24.149334-3.242666 114.688 114.688 0 0 0-85.930666 112.085333v36.949333c0 19.413333 7.082667 38.144 20.010666 52.608a32 32 0 0 1-47.701333 42.666667 142.677333 142.677333 0 0 1-36.352-95.274667v-36.949333a178.688 178.688 0 0 1 134.272-174.165333 96.810667 96.810667 0 0 1 71.168 9.557333 171.050667 171.050667 0 0 0 165.376 0 96.170667 96.170667 0 0 1 70.912-9.344 178.56 178.56 0 0 1 134.4 174.122667zM737.834667 209.962667a32 32 0 0 1 40.832-19.498667 160 160 0 0 1 53.333333 270.122667 32 32 0 1 1-42.666667-47.701334 96.042667 96.042667 0 0 0-32-162.133333 32 32 0 0 1-19.498666-40.789333z m190.165333 465.578666v30.805334a32 32 0 1 1-64 0v-30.805334a90.197333 90.197333 0 0 0-67.541333-88.192 32 32 0 0 1 15.573333-62.08 154.112 154.112 0 0 1 115.968 150.272zM192 479.530667a160 160 0 0 1 53.333333-270.122667 32 32 0 0 1 21.333334 60.330667 96.042667 96.042667 0 0 0-32 162.133333 32 32 0 0 1-42.666667 47.701333v-0.042666z m35.541333 126.762666a90.197333 90.197333 0 0 0-67.541333 88.192V725.333333a32 32 0 1 1-64 0v-30.805333a154.154667 154.154667 0 0 1 115.968-150.272 32 32 0 1 1 15.573333 62.037333z"
                  fill="#282c2c"
                  p-id="6984"
                ></path>
              </svg>
            </template>
            <template #svgmove>
              <svg
                t="1684241116606"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="6982"
                width="45"
                height="45"
              >
                <path
                  d="M0 0h1024v1024H0z"
                  fill="#e6e6e6"
                  fill-opacity="0"
                  p-id="6983"
                ></path>
                <path
                  d="M512 586.666667a202.666667 202.666667 0 1 0 0-405.333334 202.666667 202.666667 0 0 0 0 405.333334z m0-341.333334a138.666667 138.666667 0 1 1 0 277.333334 138.666667 138.666667 0 0 1 0-277.333334z m288 539.733334v36.949333c0.042667 35.157333-12.885333 69.12-36.352 95.274667a32 32 0 0 1-47.701333-42.666667c12.928-14.506667 20.053333-33.194667 20.010666-52.608V785.066667a114.602667 114.602667 0 0 0-85.888-112.042667 32.64 32.64 0 0 0-23.936 3.029333 235.264 235.264 0 0 1-228.138666 0 32.896 32.896 0 0 0-24.149334-3.242666 114.688 114.688 0 0 0-85.930666 112.085333v36.949333c0 19.413333 7.082667 38.144 20.010666 52.608a32 32 0 0 1-47.701333 42.666667 142.677333 142.677333 0 0 1-36.352-95.274667v-36.949333a178.688 178.688 0 0 1 134.272-174.165333 96.810667 96.810667 0 0 1 71.168 9.557333 171.050667 171.050667 0 0 0 165.376 0 96.170667 96.170667 0 0 1 70.912-9.344 178.56 178.56 0 0 1 134.4 174.122667zM737.834667 209.962667a32 32 0 0 1 40.832-19.498667 160 160 0 0 1 53.333333 270.122667 32 32 0 1 1-42.666667-47.701334 96.042667 96.042667 0 0 0-32-162.133333 32 32 0 0 1-19.498666-40.789333z m190.165333 465.578666v30.805334a32 32 0 1 1-64 0v-30.805334a90.197333 90.197333 0 0 0-67.541333-88.192 32 32 0 0 1 15.573333-62.08 154.112 154.112 0 0 1 115.968 150.272zM192 479.530667a160 160 0 0 1 53.333333-270.122667 32 32 0 0 1 21.333334 60.330667 96.042667 96.042667 0 0 0-32 162.133333 32 32 0 0 1-42.666667 47.701333v-0.042666z m35.541333 126.762666a90.197333 90.197333 0 0 0-67.541333 88.192V725.333333a32 32 0 1 1-64 0v-30.805333a154.154667 154.154667 0 0 1 115.968-150.272 32 32 0 1 1 15.573333 62.037333z"
                  fill="#e6e6e6"
                  p-id="6984"
                ></path>
              </svg>
            </template>
          </card>
        </el-col>
        <el-col :span="4">
          <card
            :value="cardInfo.consumptionCapacityNum"
            label="用户累计消费"
            background="#eade02"
            :is-num="true"
            to-fixed="2"
            suffix="元"
          >
            <template #svgLeave>
              <svg
                t="1686984083187"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="26100"
                width="45"
                height="45"
              >
                <path
                  d="M922.8 338.5c-22.5-53.1-54.6-100.8-95.5-141.7-40.9-40.9-88.6-73.1-141.7-95.5-55-23.3-113.4-35-173.5-35-60.2 0-118.6 11.8-173.5 35-53.1 22.5-100.8 54.6-141.7 95.5-40.9 40.9-73.1 88.6-95.5 141.7-23.3 55-35 113.4-35 173.5 0 60.2 11.8 118.6 35 173.5 22.5 53.1 54.6 100.8 95.5 141.7 40.9 40.9 88.6 73.1 141.7 95.5 55 23.3 113.4 35 173.5 35 60.2 0 118.6-11.8 173.5-35 53.1-22.5 100.8-54.6 141.7-95.5 40.9-40.9 73.1-88.6 95.5-141.7 23.3-55 35-113.4 35-173.5 0-60.2-11.8-118.6-35-173.5zM512 907.8c-218.3 0-395.8-177.6-395.8-395.8 0-218.3 177.6-395.8 395.8-395.8 218.3 0 395.8 177.6 395.8 395.8 0 218.3-177.5 395.8-395.8 395.8z"
                  fill="#eade02"
                  p-id="26101"
                ></path>
                <path
                  d="M512 192.8c-85.3 0-165.4 33.2-225.7 93.5S192.8 426.7 192.8 512s33.2 165.4 93.5 225.7 140.4 93.5 225.7 93.5 165.4-33.2 225.7-93.5 93.5-140.4 93.5-225.7-33.2-165.4-93.5-225.7-140.4-93.5-225.7-93.5z m0 588.4c-148.4 0-269.2-120.8-269.2-269.2S363.6 242.8 512 242.8 781.2 363.6 781.2 512 660.4 781.2 512 781.2z"
                  fill="#eade02"
                  p-id="26102"
                ></path>
                <path
                  d="M611.4 351.5L509.2 453.6l-98.9-98.9c-9.8-9.8-25.6-9.8-35.4 0-9.8 9.8-9.8 25.6 0 35.4l80.1 80.1h-50.5c-13.8 0-25 11.2-25 25s11.2 25 25 25h79.3v48.5h-79.3c-13.8 0-25 11.2-25 25s11.2 25 25 25h79.3v60.7c0 13.8 11.2 25 25 25s25-11.2 25-25v-60.7H617c13.8 0 25-11.2 25-25s-11.2-25-25-25h-83.2v-48.5H617c13.8 0 25-11.2 25-25s-11.2-25-25-25h-53.8l83.4-83.4c9.8-9.8 9.8-25.6 0-35.4-9.6-9.7-25.5-9.7-35.2 0.1z"
                  fill="#eade02"
                  p-id="26103"
                ></path>
              </svg>
            </template>
            <template #svgmove>
              <svg
                t="1686984083187"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="26100"
                width="45"
                height="45"
              >
                <path
                  d="M922.8 338.5c-22.5-53.1-54.6-100.8-95.5-141.7-40.9-40.9-88.6-73.1-141.7-95.5-55-23.3-113.4-35-173.5-35-60.2 0-118.6 11.8-173.5 35-53.1 22.5-100.8 54.6-141.7 95.5-40.9 40.9-73.1 88.6-95.5 141.7-23.3 55-35 113.4-35 173.5 0 60.2 11.8 118.6 35 173.5 22.5 53.1 54.6 100.8 95.5 141.7 40.9 40.9 88.6 73.1 141.7 95.5 55 23.3 113.4 35 173.5 35 60.2 0 118.6-11.8 173.5-35 53.1-22.5 100.8-54.6 141.7-95.5 40.9-40.9 73.1-88.6 95.5-141.7 23.3-55 35-113.4 35-173.5 0-60.2-11.8-118.6-35-173.5zM512 907.8c-218.3 0-395.8-177.6-395.8-395.8 0-218.3 177.6-395.8 395.8-395.8 218.3 0 395.8 177.6 395.8 395.8 0 218.3-177.5 395.8-395.8 395.8z"
                  fill="#e6e6e6"
                  p-id="26101"
                ></path>
                <path
                  d="M512 192.8c-85.3 0-165.4 33.2-225.7 93.5S192.8 426.7 192.8 512s33.2 165.4 93.5 225.7 140.4 93.5 225.7 93.5 165.4-33.2 225.7-93.5 93.5-140.4 93.5-225.7-33.2-165.4-93.5-225.7-140.4-93.5-225.7-93.5z m0 588.4c-148.4 0-269.2-120.8-269.2-269.2S363.6 242.8 512 242.8 781.2 363.6 781.2 512 660.4 781.2 512 781.2z"
                  fill="#e6e6e6"
                  p-id="26102"
                ></path>
                <path
                  d="M611.4 351.5L509.2 453.6l-98.9-98.9c-9.8-9.8-25.6-9.8-35.4 0-9.8 9.8-9.8 25.6 0 35.4l80.1 80.1h-50.5c-13.8 0-25 11.2-25 25s11.2 25 25 25h79.3v48.5h-79.3c-13.8 0-25 11.2-25 25s11.2 25 25 25h79.3v60.7c0 13.8 11.2 25 25 25s25-11.2 25-25v-60.7H617c13.8 0 25-11.2 25-25s-11.2-25-25-25h-83.2v-48.5H617c13.8 0 25-11.2 25-25s-11.2-25-25-25h-53.8l83.4-83.4c9.8-9.8 9.8-25.6 0-35.4-9.6-9.7-25.5-9.7-35.2 0.1z"
                  fill="#e6e6e6"
                  p-id="26103"
                ></path>
              </svg>
            </template>
          </card>
        </el-col>
        <el-col :span="5">
          <card
            :value="cardInfo.recencyNum"
            label="用户最近消费日期"
            background="#1296db"
            :is-num="true"
            to-fixed="0"
            suffix="天"
          >
            <template #svgLeave>
              <svg
                t="1686984267174"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="29251"
                width="45"
                height="45"
              >
                <path
                  d="M512 127c-212.19 0-384.2 172-384.2 384.2s172 384.2 384.2 384.2 384.2-172 384.2-384.2S724.16 127 512 127z m0 722.31c-186.73 0-338.1-151.37-338.1-338.1S325.24 173.1 512 173.1s338.1 151.37 338.1 338.1S698.7 849.3 512 849.3z"
                  fill="#1296db"
                  p-id="29252"
                ></path>
                <path
                  d="M546.55 320.1a20 20 0 0 0-20 20v180.4H349.08A23.12 23.12 0 0 0 326 543.55a23.12 23.12 0 0 0 23.05 23.05h192.51a22.89 22.89 0 0 0 5.32-0.63 20 20 0 0 0 19.65-20V340.09a20 20 0 0 0-19.98-19.99z"
                  fill="#1296db"
                  p-id="29253"
                ></path>
              </svg>
            </template>
            <template #svgmove>
              <svg
                t="1686984267174"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="29251"
                width="45"
                height="45"
              >
                <path
                  d="M512 127c-212.19 0-384.2 172-384.2 384.2s172 384.2 384.2 384.2 384.2-172 384.2-384.2S724.16 127 512 127z m0 722.31c-186.73 0-338.1-151.37-338.1-338.1S325.24 173.1 512 173.1s338.1 151.37 338.1 338.1S698.7 849.3 512 849.3z"
                  fill="#e6e6e6"
                  p-id="29252"
                ></path>
                <path
                  d="M546.55 320.1a20 20 0 0 0-20 20v180.4H349.08A23.12 23.12 0 0 0 326 543.55a23.12 23.12 0 0 0 23.05 23.05h192.51a22.89 22.89 0 0 0 5.32-0.63 20 20 0 0 0 19.65-20V340.09a20 20 0 0 0-19.98-19.99z"
                  fill="#e6e6e6"
                  p-id="29253"
                ></path>
              </svg>
            </template>
          </card>
        </el-col>
        <el-col :span="5">
          <card
            :value="cardInfo.frequencyNum"
            label="用户消费频率"
            background="#d4172c"
            :is-num="true"
            to-fixed="0"
            suffix="次"
          >
            <template #svgLeave>
              <svg
                t="1686984182013"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="27761"
                width="45"
                height="45"
              >
                <path
                  d="M658.285714 0m43.885715 0l277.942857 0q43.885714 0 43.885714 43.885714l0 0q0 43.885714-43.885714 43.885715l-277.942857 0q-43.885714 0-43.885715-43.885715l0 0q0-43.885714 43.885715-43.885714Z"
                  fill="#d4172c"
                  p-id="27762"
                ></path>
                <path
                  d="M658.285714 197.485714m43.885715 0l277.942857 0q43.885714 0 43.885714 43.885715l0 0q0 43.885714-43.885714 43.885714l-277.942857 0q-43.885714 0-43.885715-43.885714l0 0q0-43.885714 43.885715-43.885715Z"
                  fill="#d4172c"
                  p-id="27763"
                ></path>
                <path
                  d="M0 477.622857m43.885714 0l190.171429 0q43.885714 0 43.885714 43.885714l0 0q0 43.885714-43.885714 43.885715l-190.171429 0q-43.885714 0-43.885714-43.885715l0 0q0-43.885714 43.885714-43.885714Z"
                  fill="#d4172c"
                  p-id="27764"
                ></path>
                <path
                  d="M746.057143 631.954286m43.885714 0l190.171429 0q43.885714 0 43.885714 43.885714l0 0q0 43.885714-43.885714 43.885714l-190.171429 0q-43.885714 0-43.885714-43.885714l0 0q0-43.885714 43.885714-43.885714Z"
                  fill="#d4172c"
                  p-id="27765"
                ></path>
                <path
                  d="M173.601394 537.75186m21.942857-38.006143l175.542857-304.049148q21.942857-38.006143 59.949001-16.063286l0 0q38.006143 21.942857 16.063286 59.949l-175.542857 304.049148q-21.942857 38.006143-59.949001 16.063286l0 0q-38.006143-21.942857-16.063286-59.949Z"
                  fill="#d4172c"
                  p-id="27766"
                ></path>
                <path
                  d="M441.554934 162.948034m11.358459 42.390344l204.452256 763.026207q11.358459 42.390345-31.031886 53.748804l0 0q-42.390345 11.358459-53.748804-31.031886l-204.452256-763.026207q-11.358459-42.390345 31.031886-53.748804l0 0q42.390345-11.358459 53.748804 31.031886Z"
                  fill="#d4172c"
                  p-id="27767"
                ></path>
                <path
                  d="M554.694574 995.755459m21.942858-38.006144l175.542857-304.049147q21.942857-38.006143 59.949-16.063287l0 0q38.006143 21.942857 16.063287 59.949001l-175.542858 304.049147q-21.942857 38.006143-59.949 16.063287l0 0q-38.006143-21.942857-16.063286-59.949001Z"
                  fill="#d4172c"
                  p-id="27768"
                ></path>
              </svg>
            </template>
            <template #svgmove>
              <svg
                t="1686984182013"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="27761"
                width="45"
                height="45"
              >
                <path
                  d="M658.285714 0m43.885715 0l277.942857 0q43.885714 0 43.885714 43.885714l0 0q0 43.885714-43.885714 43.885715l-277.942857 0q-43.885714 0-43.885715-43.885715l0 0q0-43.885714 43.885715-43.885714Z"
                  fill="#e6e6e6"
                  p-id="27762"
                ></path>
                <path
                  d="M658.285714 197.485714m43.885715 0l277.942857 0q43.885714 0 43.885714 43.885715l0 0q0 43.885714-43.885714 43.885714l-277.942857 0q-43.885714 0-43.885715-43.885714l0 0q0-43.885714 43.885715-43.885715Z"
                  fill="#e6e6e6"
                  p-id="27763"
                ></path>
                <path
                  d="M0 477.622857m43.885714 0l190.171429 0q43.885714 0 43.885714 43.885714l0 0q0 43.885714-43.885714 43.885715l-190.171429 0q-43.885714 0-43.885714-43.885715l0 0q0-43.885714 43.885714-43.885714Z"
                  fill="#e6e6e6"
                  p-id="27764"
                ></path>
                <path
                  d="M746.057143 631.954286m43.885714 0l190.171429 0q43.885714 0 43.885714 43.885714l0 0q0 43.885714-43.885714 43.885714l-190.171429 0q-43.885714 0-43.885714-43.885714l0 0q0-43.885714 43.885714-43.885714Z"
                  fill="#e6e6e6"
                  p-id="27765"
                ></path>
                <path
                  d="M173.601394 537.75186m21.942857-38.006143l175.542857-304.049148q21.942857-38.006143 59.949001-16.063286l0 0q38.006143 21.942857 16.063286 59.949l-175.542857 304.049148q-21.942857 38.006143-59.949001 16.063286l0 0q-38.006143-21.942857-16.063286-59.949Z"
                  fill="#e6e6e6"
                  p-id="27766"
                ></path>
                <path
                  d="M441.554934 162.948034m11.358459 42.390344l204.452256 763.026207q11.358459 42.390345-31.031886 53.748804l0 0q-42.390345 11.358459-53.748804-31.031886l-204.452256-763.026207q-11.358459-42.390345 31.031886-53.748804l0 0q42.390345-11.358459 53.748804 31.031886Z"
                  fill="#e6e6e6"
                  p-id="27767"
                ></path>
                <path
                  d="M554.694574 995.755459m21.942858-38.006144l175.542857-304.049147q21.942857-38.006143 59.949-16.063287l0 0q38.006143 21.942857 16.063287 59.949001l-175.542858 304.049147q-21.942857 38.006143-59.949 16.063287l0 0q-38.006143-21.942857-16.063286-59.949001Z"
                  fill="#e6e6e6"
                  p-id="27768"
                ></path>
              </svg>
            </template>
          </card>
        </el-col>
      </el-row>
      <p class="p_h">规则信息</p>
      <el-row>
        <e-col :span="8">
          <p style="margin-right: 10px; margin-top: 3px">活动时间范围</p>
        </e-col>
        <e-col :span="16">
          <div style="width: 100%; margin-right: 10px">
            <el-select @change="timeChange" v-model="time">
              <el-option label="完整日期" value="1"> </el-option>
              <el-option label="近一月交易" value="2"> </el-option>
              <el-option label="两周内" value="3"> </el-option>
              <el-option label="一周内" value="4"> </el-option>
            </el-select>
          </div>
        </e-col>
      </el-row>
      <div v-loading="ruleLoading">
        <el-row :gutter="20" style="margin-top: 15px">
          <el-col :span="5">
            <card
              :value="ruleInfo.activeTimeNum"
              :label="'时间在' + ruleInfo.activeTime + '交易次数'"
              background="#0F82E4"
              suffix="次"
              :is-num="true"
            >
              <template #svgLeave>
                <svg
                  t="1687953190159"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="1480"
                  width="45"
                  height="45"
                >
                  <path
                    d="M512 408c-4 0-8-1.5-11.1-4.5l-101.4-97.7L297.6 396c-6.6 5.9-16.7 5.2-22.6-1.4-5.9-6.6-5.2-16.7 1.4-22.6l113-100c6.2-5.5 15.7-5.3 21.7 0.5l102.3 98.7 213.1-156c7.1-5.2 17.2-3.7 22.4 3.5 5.2 7.1 3.7 17.1-3.5 22.4l-224 164a16.8 16.8 0 0 1-9.4 2.9z"
                    fill="#0F82E4"
                    p-id="1481"
                  ></path>
                  <path
                    d="M880 128H144c-44.1 0-80 35.9-80 80v464c0 44.1 35.9 80 80 80h352v64.4c-121.5 3.7-197 48-200.2 49.9-7.6 4.5-10 14.3-5.5 21.9 4.5 7.6 14.3 10 21.9 5.5 0.8-0.4 78.3-45.7 199.8-45.7s199 45.3 199.8 45.7c2.6 1.5 5.4 2.2 8.2 2.2 5.5 0 10.8-2.8 13.8-7.8 4.5-7.6 2.1-17.4-5.5-21.9-3.3-2-78.7-46.2-200.2-49.9V752h352c44.1 0 80-35.9 80-80V208c-0.1-44.1-36-80-80.1-80z m-736 32h736c26.5 0 48 21.5 48 48v400H96V208c0-26.5 21.5-48 48-48z m736 560H144c-26.5 0-48-21.5-48-48v-32h832v32c0 26.5-21.5 48-48 48z"
                    fill="#333333"
                    p-id="1482"
                  ></path>
                  <path
                    d="M288 544c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16s16 7.2 16 16v32c0 8.8-7.2 16-16 16zM512 544c-8.8 0-16-7.2-16-16v-64c0-8.8 7.2-16 16-16s16 7.2 16 16v64c0 8.8-7.2 16-16 16zM736 544c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16s16 7.2 16 16v160c0 8.8-7.2 16-16 16zM400 544c-8.8 0-16-7.2-16-16V416c0-8.8 7.2-16 16-16s16 7.2 16 16v112c0 8.8-7.2 16-16 16zM624 544c-8.8 0-16-7.2-16-16v-80c0-8.8 7.2-16 16-16s16 7.2 16 16v80c0 8.8-7.2 16-16 16z"
                    fill="#333333"
                    p-id="1483"
                  ></path>
                </svg>
              </template>
              <template #svgmove>
                <svg
                  t="1687953190159"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="1480"
                  width="45"
                  height="45"
                >
                  <path
                    d="M512 408c-4 0-8-1.5-11.1-4.5l-101.4-97.7L297.6 396c-6.6 5.9-16.7 5.2-22.6-1.4-5.9-6.6-5.2-16.7 1.4-22.6l113-100c6.2-5.5 15.7-5.3 21.7 0.5l102.3 98.7 213.1-156c7.1-5.2 17.2-3.7 22.4 3.5 5.2 7.1 3.7 17.1-3.5 22.4l-224 164a16.8 16.8 0 0 1-9.4 2.9z"
                    fill="#333333"
                    p-id="1481"
                  ></path>
                  <path
                    d="M880 128H144c-44.1 0-80 35.9-80 80v464c0 44.1 35.9 80 80 80h352v64.4c-121.5 3.7-197 48-200.2 49.9-7.6 4.5-10 14.3-5.5 21.9 4.5 7.6 14.3 10 21.9 5.5 0.8-0.4 78.3-45.7 199.8-45.7s199 45.3 199.8 45.7c2.6 1.5 5.4 2.2 8.2 2.2 5.5 0 10.8-2.8 13.8-7.8 4.5-7.6 2.1-17.4-5.5-21.9-3.3-2-78.7-46.2-200.2-49.9V752h352c44.1 0 80-35.9 80-80V208c-0.1-44.1-36-80-80.1-80z m-736 32h736c26.5 0 48 21.5 48 48v400H96V208c0-26.5 21.5-48 48-48z m736 560H144c-26.5 0-48-21.5-48-48v-32h832v32c0 26.5-21.5 48-48 48z"
                    fill="#e6e6e6"
                    p-id="1482"
                  ></path>
                  <path
                    d="M288 544c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16s16 7.2 16 16v32c0 8.8-7.2 16-16 16zM512 544c-8.8 0-16-7.2-16-16v-64c0-8.8 7.2-16 16-16s16 7.2 16 16v64c0 8.8-7.2 16-16 16zM736 544c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16s16 7.2 16 16v160c0 8.8-7.2 16-16 16zM400 544c-8.8 0-16-7.2-16-16V416c0-8.8 7.2-16 16-16s16 7.2 16 16v112c0 8.8-7.2 16-16 16zM624 544c-8.8 0-16-7.2-16-16v-80c0-8.8 7.2-16 16-16s16 7.2 16 16v80c0 8.8-7.2 16-16 16z"
                    fill="#e6e6e6"
                    p-id="1483"
                  ></path>
                </svg>
              </template>
            </card>
          </el-col>
          <el-col :span="5">
            <card
              :value="ruleInfo.priceLikeNum"
              :label="'价格在' + ruleInfo.priceLike + '交易次数'"
              background="#6276eb"
              suffix="次"
              :is-num="true"
            >
              <template #svgLeave>
                <svg
                  t="1687953339534"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="4451"
                  width="45"
                  height="45"
                >
                  <path
                    d="M935.136 190.176c0.864-1.6 1.856-3.104 2.4-4.8 0.64-1.984 0.8-3.968 0.992-6.016 0.096-0.992 0.48-1.92 0.48-2.944 0-0.64-0.128-1.248-0.16-1.92-0.064-0.928-0.064-1.792-0.224-2.72-7.84-136.384-356.16-143.424-426.656-143.424-71.328 0-427.04 7.136-427.04 148.064 0 6.496 2.176 12.8 6.144 17.984l298.816 384.512 0 387.52c0 16.16 13.12 29.248 29.28 29.248s29.28-13.088 29.28-29.248l0-397.568c0-6.496-2.176-12.8-6.144-17.984l-297.152-382.304c17.152-40.128 163.008-81.696 366.816-81.696 203.2 0 348.64 41.312 366.56 81.312-61.12 69.184-168.896 97.76-366.24 97.76-16.16 0-29.28 13.088-29.28 29.248s13.12 29.248 29.28 29.248c94.496 0 188.928-5.184 269.216-30.72l-199.904 257.184c-4 5.152-6.144 11.456-6.144 17.984l0 227.168c0 16.16 13.088 29.248 29.248 29.248s29.248-13.088 29.248-29.248l0-217.12 297.28-382.432c0.576-0.704 1.216-1.312 1.76-2.016C934.048 193.12 934.368 191.584 935.136 190.176z"
                    fill="#6276eb"
                    p-id="4452"
                  ></path>
                </svg>
              </template>
              <template #svgmove>
                <svg
                  t="1687953339534"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="4451"
                  width="45"
                  height="45"
                >
                  <path
                    d="M935.136 190.176c0.864-1.6 1.856-3.104 2.4-4.8 0.64-1.984 0.8-3.968 0.992-6.016 0.096-0.992 0.48-1.92 0.48-2.944 0-0.64-0.128-1.248-0.16-1.92-0.064-0.928-0.064-1.792-0.224-2.72-7.84-136.384-356.16-143.424-426.656-143.424-71.328 0-427.04 7.136-427.04 148.064 0 6.496 2.176 12.8 6.144 17.984l298.816 384.512 0 387.52c0 16.16 13.12 29.248 29.28 29.248s29.28-13.088 29.28-29.248l0-397.568c0-6.496-2.176-12.8-6.144-17.984l-297.152-382.304c17.152-40.128 163.008-81.696 366.816-81.696 203.2 0 348.64 41.312 366.56 81.312-61.12 69.184-168.896 97.76-366.24 97.76-16.16 0-29.28 13.088-29.28 29.248s13.12 29.248 29.28 29.248c94.496 0 188.928-5.184 269.216-30.72l-199.904 257.184c-4 5.152-6.144 11.456-6.144 17.984l0 227.168c0 16.16 13.088 29.248 29.248 29.248s29.248-13.088 29.248-29.248l0-217.12 297.28-382.432c0.576-0.704 1.216-1.312 1.76-2.016C934.048 193.12 934.368 191.584 935.136 190.176z"
                    fill="#e6e6e6"
                    p-id="4452"
                  ></path>
                </svg>
              </template>
            </card>
          </el-col>
          <el-col :span="4">
            <card
              :value="ruleInfo.cumulativeView"
              label="浏览次数"
              background="#444444"
              :is-num="true"
              suffix="次"
            >
              <template #svgLeave>
                <svg
                  t="1687953409827"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="6033"
                  width="45"
                  height="45"
                >
                  <path
                    d="M512 153.6c-123.477333 0-235.178667 51.9168-323.089067 137.557333C117.230933 360.96 68.266667 448.938667 68.266667 505.173333v13.6704c0 56.234667 48.981333 144.196267 120.644266 214.016C276.804267 818.466133 388.522667 870.4 512 870.4c123.613867 0 235.246933-51.234133 322.7648-135.970133 71.799467-69.5296 120.490667-157.320533 120.968533-215.296V505.173333c-0.477867-58.2656-49.169067-146.056533-120.968533-215.586133C747.246933 204.8512 635.5968 153.6 512 153.6z m0 68.266667c104.6528 0 199.799467 43.6736 275.268267 116.753066 59.886933 57.992533 99.8912 130.133333 100.1984 166.843734v13.380266c-0.3072 36.420267-40.311467 108.544-100.181334 166.536534C711.7824 758.459733 616.635733 802.133333 512 802.133333c-104.3456 0-199.560533-44.2368-275.456-118.186666C176.810667 625.7664 136.533333 553.4208 136.533333 518.843733V505.173333c0-34.577067 40.277333-106.922667 100.010667-165.12C312.439467 266.120533 407.6544 221.866667 512 221.866667z"
                    fill="#444444"
                    p-id="6034"
                  ></path>
                  <path
                    d="M512 341.333333c-94.2592 0-170.666667 76.407467-170.666667 170.666667s76.407467 170.666667 170.666667 170.666667 170.666667-76.407467 170.666667-170.666667-76.407467-170.666667-170.666667-170.666667z m0 68.266667a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z"
                    fill="#00B386"
                    p-id="6035"
                  ></path>
                </svg>
              </template>
              <template #svgmove>
                <svg
                  t="1687953409827"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="6033"
                  width="45"
                  height="45"
                >
                  <path
                    d="M512 153.6c-123.477333 0-235.178667 51.9168-323.089067 137.557333C117.230933 360.96 68.266667 448.938667 68.266667 505.173333v13.6704c0 56.234667 48.981333 144.196267 120.644266 214.016C276.804267 818.466133 388.522667 870.4 512 870.4c123.613867 0 235.246933-51.234133 322.7648-135.970133 71.799467-69.5296 120.490667-157.320533 120.968533-215.296V505.173333c-0.477867-58.2656-49.169067-146.056533-120.968533-215.586133C747.246933 204.8512 635.5968 153.6 512 153.6z m0 68.266667c104.6528 0 199.799467 43.6736 275.268267 116.753066 59.886933 57.992533 99.8912 130.133333 100.1984 166.843734v13.380266c-0.3072 36.420267-40.311467 108.544-100.181334 166.536534C711.7824 758.459733 616.635733 802.133333 512 802.133333c-104.3456 0-199.560533-44.2368-275.456-118.186666C176.810667 625.7664 136.533333 553.4208 136.533333 518.843733V505.173333c0-34.577067 40.277333-106.922667 100.010667-165.12C312.439467 266.120533 407.6544 221.866667 512 221.866667z"
                    fill="#00B386"
                    p-id="6034"
                  ></path>
                  <path
                    d="M512 341.333333c-94.2592 0-170.666667 76.407467-170.666667 170.666667s76.407467 170.666667 170.666667 170.666667 170.666667-76.407467 170.666667-170.666667-76.407467-170.666667-170.666667-170.666667z m0 68.266667a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z"
                    fill="#e6e6e6"
                    p-id="6035"
                  ></path>
                </svg>
              </template>
            </card>
          </el-col>
          <el-col :span="5">
            <card
              :value="ruleInfo.cumulativePurchases"
              label="下单次数"
              background="#6276eb"
              :is-num="true"
              suffix="次"
            >
              <template #svgLeave>
                <svg
                  t="1687953499975"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="7071"
                  width="45"
                  height="45"
                >
                  <path
                    d="M803.84 235.52H225.28c-11.3152 0-20.48 9.1648-20.48 20.48s9.1648 20.48 20.48 20.48h578.56c11.3152 0 20.48-9.1648 20.48-20.48s-9.1648-20.48-20.48-20.48zM803.84 389.12H225.28c-11.3152 0-20.48 9.1648-20.48 20.48s9.1648 20.48 20.48 20.48h578.56c11.3152 0 20.48-9.1648 20.48-20.48s-9.1648-20.48-20.48-20.48zM496.64 542.72H225.28c-11.3152 0-20.48 9.1648-20.48 20.48s9.1648 20.48 20.48 20.48h271.36c11.3152 0 20.48-9.1648 20.48-20.48s-9.1648-20.48-20.48-20.48z"
                    fill="#6276eb"
                    p-id="7072"
                  ></path>
                  <path
                    d="M875.52 87.04H148.48c-33.9456 0-61.44 27.4944-61.44 61.44v727.04c0 33.9456 27.4944 61.44 61.44 61.44h348.16c11.3152 0 20.48-9.1648 20.48-20.48s-9.1648-20.48-20.48-20.48H148.48c-11.3152 0-20.48-9.1648-20.48-20.48V148.48c0-11.3152 9.1648-20.48 20.48-20.48h727.04c11.3152 0 20.48 9.1648 20.48 20.48v312.32c0 11.3152 9.1648 20.48 20.48 20.48s20.48-9.1648 20.48-20.48V148.48c0-33.9456-27.4944-61.44-61.44-61.44z"
                    fill="#6276eb"
                    p-id="7073"
                  ></path>
                  <path
                    d="M929.28 782.7456a20.52096 20.52096 0 0 0-28.9792 0L814.08 868.9664V619.52c0-11.3152-9.1648-20.48-20.48-20.48s-20.48 9.1648-20.48 20.48v249.4464l-86.2208-86.2208a20.52096 20.52096 0 0 0-28.9792 0 20.52096 20.52096 0 0 0 0 28.9792l119.5008 119.5008c4.4032 4.4032 10.3936 6.2976 16.1792 5.8368 5.7856 0.4608 11.7248-1.4336 16.1792-5.8368l119.5008-119.5008a20.52096 20.52096 0 0 0 0-28.9792z"
                    fill="#6276eb"
                    p-id="7074"
                  ></path>
                </svg>
              </template>
              <template #svgmove>
                <svg
                  t="1687953499975"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="7071"
                  width="45"
                  height="45"
                >
                  <path
                    d="M803.84 235.52H225.28c-11.3152 0-20.48 9.1648-20.48 20.48s9.1648 20.48 20.48 20.48h578.56c11.3152 0 20.48-9.1648 20.48-20.48s-9.1648-20.48-20.48-20.48zM803.84 389.12H225.28c-11.3152 0-20.48 9.1648-20.48 20.48s9.1648 20.48 20.48 20.48h578.56c11.3152 0 20.48-9.1648 20.48-20.48s-9.1648-20.48-20.48-20.48zM496.64 542.72H225.28c-11.3152 0-20.48 9.1648-20.48 20.48s9.1648 20.48 20.48 20.48h271.36c11.3152 0 20.48-9.1648 20.48-20.48s-9.1648-20.48-20.48-20.48z"
                    fill="#e6e6e6"
                    p-id="7072"
                  ></path>
                  <path
                    d="M875.52 87.04H148.48c-33.9456 0-61.44 27.4944-61.44 61.44v727.04c0 33.9456 27.4944 61.44 61.44 61.44h348.16c11.3152 0 20.48-9.1648 20.48-20.48s-9.1648-20.48-20.48-20.48H148.48c-11.3152 0-20.48-9.1648-20.48-20.48V148.48c0-11.3152 9.1648-20.48 20.48-20.48h727.04c11.3152 0 20.48 9.1648 20.48 20.48v312.32c0 11.3152 9.1648 20.48 20.48 20.48s20.48-9.1648 20.48-20.48V148.48c0-33.9456-27.4944-61.44-61.44-61.44z"
                    fill="#e6e6e6"
                    p-id="7073"
                  ></path>
                  <path
                    d="M929.28 782.7456a20.52096 20.52096 0 0 0-28.9792 0L814.08 868.9664V619.52c0-11.3152-9.1648-20.48-20.48-20.48s-20.48 9.1648-20.48 20.48v249.4464l-86.2208-86.2208a20.52096 20.52096 0 0 0-28.9792 0 20.52096 20.52096 0 0 0 0 28.9792l119.5008 119.5008c4.4032 4.4032 10.3936 6.2976 16.1792 5.8368 5.7856 0.4608 11.7248-1.4336 16.1792-5.8368l119.5008-119.5008a20.52096 20.52096 0 0 0 0-28.9792z"
                    fill="#e6e6e6"
                    p-id="7074"
                  ></path>
                </svg>
              </template>
            </card>
          </el-col>
          <el-col :span="5">
            <card
              :value="ruleInfo.cumulativeCart"
              label="加入购物车次数"
              background="#e98f36"
              :is-num="true"
              suffix="次"
            >
              <template #svgLeave>
                <svg
                  t="1687953610218"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="8781"
                  width="45"
                  height="45"
                >
                  <path
                    d="M848 712H318.4c-25.6 0-46.4-19.2-48-41.6L240 201.6c-1.6-25.6-16-46.4-38.4-57.6l-48-20.8c-12.8-4.8-25.6 0-32 12.8s0 25.6 12.8 32l46.4 20.8c6.4 3.2 11.2 9.6 11.2 17.6l28.8 468.8c3.2 48 46.4 86.4 96 86.4H848c12.8 0 24-11.2 24-24s-11.2-25.6-24-25.6z"
                    p-id="8782"
                    fill="#e98f36"
                  ></path>
                  <path
                    d="M884.8 265.6c-14.4-16-35.2-25.6-57.6-25.6H337.6c-12.8 0-24 11.2-24 24s11.2 24 24 24h489.6c8 0 16 3.2 20.8 9.6 4.8 6.4 8 14.4 8 22.4l-38.4 211.2v1.6c-1.6 14.4-12.8 24-27.2 25.6l-420.8 32c-12.8 1.6-22.4 12.8-22.4 25.6 1.6 12.8 11.2 22.4 24 22.4h1.6l419.2-32c36.8-3.2 67.2-30.4 70.4-67.2l38.4-212.8v-1.6c4.8-20.8-1.6-43.2-16-59.2z"
                    p-id="8783"
                    fill="#e98f36"
                  ></path>
                  <path
                    d="M305.6 856m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z"
                    p-id="8784"
                    fill="#e98f36"
                  ></path>
                  <path
                    d="M753.6 856m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z"
                    p-id="8785"
                    fill="#e98f36"
                  ></path>
                </svg>
              </template>
              <template #svgmove>
                <svg
                  t="1687953610218"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="8781"
                  width="45"
                  height="45"
                >
                  <path
                    d="M848 712H318.4c-25.6 0-46.4-19.2-48-41.6L240 201.6c-1.6-25.6-16-46.4-38.4-57.6l-48-20.8c-12.8-4.8-25.6 0-32 12.8s0 25.6 12.8 32l46.4 20.8c6.4 3.2 11.2 9.6 11.2 17.6l28.8 468.8c3.2 48 46.4 86.4 96 86.4H848c12.8 0 24-11.2 24-24s-11.2-25.6-24-25.6z"
                    p-id="8782"
                    fill="#e6e6e6"
                  ></path>
                  <path
                    d="M884.8 265.6c-14.4-16-35.2-25.6-57.6-25.6H337.6c-12.8 0-24 11.2-24 24s11.2 24 24 24h489.6c8 0 16 3.2 20.8 9.6 4.8 6.4 8 14.4 8 22.4l-38.4 211.2v1.6c-1.6 14.4-12.8 24-27.2 25.6l-420.8 32c-12.8 1.6-22.4 12.8-22.4 25.6 1.6 12.8 11.2 22.4 24 22.4h1.6l419.2-32c36.8-3.2 67.2-30.4 70.4-67.2l38.4-212.8v-1.6c4.8-20.8-1.6-43.2-16-59.2z"
                    p-id="8783"
                    fill="#e6e6e6"
                  ></path>
                  <path
                    d="M305.6 856m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z"
                    p-id="8784"
                    fill="#e6e6e6"
                  ></path>
                  <path
                    d="M753.6 856m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z"
                    p-id="8785"
                    fill="#e6e6e6"
                  ></path>
                </svg>
              </template>
            </card>
          </el-col>
        </el-row>
        <el-row :gutter="20" style="margin-top: 20px">
          <el-col :span="5">
            <card
              :value="ruleInfo.cumulativeComment"
              label="评论次数"
              background="#1296db"
              :is-num="true"
              suffix="次"
            >
              <template #svgLeave>
                <svg
                  t="1687953671329"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="10023"
                  width="45"
                  height="45"
                >
                  <path
                    d="M842 182H182c-66 0-120 54-120 120v420c0 66 54 120 120 120h660c66 0 120-54 120-120V302c0-66-54-120-120-120z m30 510c0 33-27 60-60 60H212c-33 0-60-27-60-60V332c0-33 27-60 60-60h600c33 0 60 27 60 60v360z"
                    fill="#1296db"
                    p-id="10024"
                  ></path>
                  <path
                    d="M302 512m-60 0a60 60 0 1 0 120 0 60 60 0 1 0-120 0Z"
                    fill="#1296db"
                    p-id="10025"
                  ></path>
                  <path
                    d="M512 512m-60 0a60 60 0 1 0 120 0 60 60 0 1 0-120 0Z"
                    fill="#1296db"
                    p-id="10026"
                  ></path>
                  <path
                    d="M722 512m-60 0a60 60 0 1 0 120 0 60 60 0 1 0-120 0Z"
                    fill="#1296db"
                    p-id="10027"
                  ></path>
                </svg>
              </template>
              <template #svgmove>
                <svg
                  t="1687953671329"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="10023"
                  width="45"
                  height="45"
                >
                  <path
                    d="M842 182H182c-66 0-120 54-120 120v420c0 66 54 120 120 120h660c66 0 120-54 120-120V302c0-66-54-120-120-120z m30 510c0 33-27 60-60 60H212c-33 0-60-27-60-60V332c0-33 27-60 60-60h600c33 0 60 27 60 60v360z"
                    fill="#e6e6e6"
                    p-id="10024"
                  ></path>
                  <path
                    d="M302 512m-60 0a60 60 0 1 0 120 0 60 60 0 1 0-120 0Z"
                    fill="#e6e6e6"
                    p-id="10025"
                  ></path>
                  <path
                    d="M512 512m-60 0a60 60 0 1 0 120 0 60 60 0 1 0-120 0Z"
                    fill="#e6e6e6"
                    p-id="10026"
                  ></path>
                  <path
                    d="M722 512m-60 0a60 60 0 1 0 120 0 60 60 0 1 0-120 0Z"
                    fill="#e6e6e6"
                    p-id="10027"
                  ></path>
                </svg>
              </template>
            </card>
          </el-col>
          <el-col :span="5">
            <card
              :value="ruleInfo.cumulativeComplaint"
              label="投诉次数"
              background="#d81e06"
              :is-num="true"
              suffix="次"
            >
              <template #svgLeave>
                <svg
                  t="1687953751001"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="11247"
                  width="45"
                  height="45"
                >
                  <path
                    d="M154.4 1002.857143c-7.542857 0-14.742857-3.771429-18.971429-10.171429-5.142857-7.657143-5.142857-17.6-0.114285-25.257143l58.514285-89.028571c9.371429-14.514286 5.142857-34.4-9.485714-45.142857C67.885714 747.542857 1.142857 621.714286 1.142857 488.228571c0-61.142857 13.714286-120.342857 40.571429-176.114285 25.942857-53.6 62.971429-101.714286 110.057143-142.971429 46.857143-41.028571 101.485714-73.257143 162.171428-95.771428 62.742857-23.2 129.257143-34.971429 197.828572-34.971429 58.628571 0 116.114286 8.685714 170.971428 25.828571 53.028571 16.571429 102.4 40.685714 146.628572 71.657143 10.285714 7.2 12.8 21.485714 5.6 31.885715-7.2 10.285714-21.485714 12.8-31.885715 5.6-40.342857-28.228571-85.485714-50.285714-134.057143-65.485715-50.4-15.771429-103.314286-23.771429-157.257142-23.771428-63.085714 0-124.342857 10.857143-181.942858 32.114285-55.428571 20.571429-105.257143 49.942857-147.885714 87.2C94.857143 279.771429 46.857143 380.914286 46.857143 488.228571c0 118.857143 60 231.2 164.571428 308.228572 34.057143 25.028571 43.2 72 20.685715 106.742857 0 0-0.114286 0.114286-0.114286 0.228571l-29.028571 44.114286 165.371428-31.2c0.114286 0 0.228571 0 0.342857-0.114286L508 892.571429c1.257143-0.228571 2.514286-0.342857 3.885714-0.342858 63.085714 0 124.342857-10.857143 181.942857-32.114285 55.428571-20.571429 105.257143-49.942857 147.885715-87.2 87.085714-76.228571 135.085714-177.371429 135.085714-284.685715 0-45.371429-8.571429-89.942857-25.6-132.457142-16.457143-41.257143-40.457143-79.657143-71.314286-114.4-8.342857-9.485714-7.542857-23.885714 1.942857-32.228572 9.485714-8.342857 23.885714-7.542857 32.228572 1.942857 34.4 38.628571 61.142857 81.6 79.542857 127.771429 19.085714 47.885714 28.8 98.171429 28.8 149.371428 0 61.142857-13.714286 120.342857-40.571429 176.114286-25.942857 53.6-62.971429 101.714286-110.057142 142.971429-46.857143 41.028571-101.485714 73.257143-162.171429 95.771428-62.057143 22.971429-128 34.742857-195.885714 34.971429l-137.142857 23.428571-218.057143 41.142857c-1.371429 0.114286-2.742857 0.228571-4.114286 0.228572z"
                    p-id="11248"
                    fill="#d81e06"
                  ></path>
                  <path
                    d="M512.914286 667.428571c-12.571429 0-22.857143-10.285714-22.857143-22.857142V250.285714c0-12.571429 10.285714-22.857143 22.857143-22.857143s22.857143 10.285714 22.857143 22.857143v394.285715c0 12.571429-10.285714 22.857143-22.857143 22.857142z"
                    p-id="11249"
                    fill="#d81e06"
                  ></path>
                  <path
                    d="M513.257143 715.428571m-22.857143 0a22.857143 22.857143 0 1 0 45.714286 0 22.857143 22.857143 0 1 0-45.714286 0Z"
                    p-id="11250"
                    fill="#d81e06"
                  ></path>
                </svg>
              </template>
              <template #svgmove>
                <svg
                  t="1687953751001"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="11247"
                  width="45"
                  height="45"
                >
                  <path
                    d="M154.4 1002.857143c-7.542857 0-14.742857-3.771429-18.971429-10.171429-5.142857-7.657143-5.142857-17.6-0.114285-25.257143l58.514285-89.028571c9.371429-14.514286 5.142857-34.4-9.485714-45.142857C67.885714 747.542857 1.142857 621.714286 1.142857 488.228571c0-61.142857 13.714286-120.342857 40.571429-176.114285 25.942857-53.6 62.971429-101.714286 110.057143-142.971429 46.857143-41.028571 101.485714-73.257143 162.171428-95.771428 62.742857-23.2 129.257143-34.971429 197.828572-34.971429 58.628571 0 116.114286 8.685714 170.971428 25.828571 53.028571 16.571429 102.4 40.685714 146.628572 71.657143 10.285714 7.2 12.8 21.485714 5.6 31.885715-7.2 10.285714-21.485714 12.8-31.885715 5.6-40.342857-28.228571-85.485714-50.285714-134.057143-65.485715-50.4-15.771429-103.314286-23.771429-157.257142-23.771428-63.085714 0-124.342857 10.857143-181.942858 32.114285-55.428571 20.571429-105.257143 49.942857-147.885714 87.2C94.857143 279.771429 46.857143 380.914286 46.857143 488.228571c0 118.857143 60 231.2 164.571428 308.228572 34.057143 25.028571 43.2 72 20.685715 106.742857 0 0-0.114286 0.114286-0.114286 0.228571l-29.028571 44.114286 165.371428-31.2c0.114286 0 0.228571 0 0.342857-0.114286L508 892.571429c1.257143-0.228571 2.514286-0.342857 3.885714-0.342858 63.085714 0 124.342857-10.857143 181.942857-32.114285 55.428571-20.571429 105.257143-49.942857 147.885715-87.2 87.085714-76.228571 135.085714-177.371429 135.085714-284.685715 0-45.371429-8.571429-89.942857-25.6-132.457142-16.457143-41.257143-40.457143-79.657143-71.314286-114.4-8.342857-9.485714-7.542857-23.885714 1.942857-32.228572 9.485714-8.342857 23.885714-7.542857 32.228572 1.942857 34.4 38.628571 61.142857 81.6 79.542857 127.771429 19.085714 47.885714 28.8 98.171429 28.8 149.371428 0 61.142857-13.714286 120.342857-40.571429 176.114286-25.942857 53.6-62.971429 101.714286-110.057142 142.971429-46.857143 41.028571-101.485714 73.257143-162.171429 95.771428-62.057143 22.971429-128 34.742857-195.885714 34.971429l-137.142857 23.428571-218.057143 41.142857c-1.371429 0.114286-2.742857 0.228571-4.114286 0.228572z"
                    p-id="11248"
                    fill="#e6e6e6"
                  ></path>
                  <path
                    d="M512.914286 667.428571c-12.571429 0-22.857143-10.285714-22.857143-22.857142V250.285714c0-12.571429 10.285714-22.857143 22.857143-22.857143s22.857143 10.285714 22.857143 22.857143v394.285715c0 12.571429-10.285714 22.857143-22.857143 22.857142z"
                    p-id="11249"
                    fill="#e6e6e6"
                  ></path>
                  <path
                    d="M513.257143 715.428571m-22.857143 0a22.857143 22.857143 0 1 0 45.714286 0 22.857143 22.857143 0 1 0-45.714286 0Z"
                    p-id="11250"
                    fill="#e6e6e6"
                  ></path>
                </svg>
              </template>
            </card>
          </el-col>
          <el-col :span="5">
            <card
              :value="ruleInfo.cumulativeInquire"
              label="咨询次数"
              background="#6276eb"
              :is-num="true"
              suffix="次"
            >
              <template #svgLeave>
                <svg
                  t="1687953858238"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="17767"
                  width="45"
                  height="45"
                >
                  <path
                    d="M649.903813 626.301256c-45.25367-35.218106-96.342232-55.420217-140.172483-55.420217-22.194488 0-45.985334 11.274788-67.753103 23.760147-13.888312-18.381649-34.242895-47.042409-44.388976-64.753793-9.42465-16.511046-20.577664-41.72531-28.732391-64.164369 15.890922-6.52767 30.378891-14.619976 40.250726-25.986861 33.235962-38.217417 47.114041-100.348476 38.08541-170.4603-12.983709-100.754728-77.981049-183.992501-147.970076-189.482539-40.11872-3.090385-87.640036 6.974855-121.008005 25.813922-48.883337 27.613918-83.827197 75.286684-101.04944 137.854695-32.005948 116.311029-0.914836 273.522584 83.166141 420.548148 101.212146 176.936805 258.68976 295.819402 391.866922 295.819402 36.468586 0 70.081125-8.550747 99.901291-25.397437 16.379039-9.231245 70.925353-43.250036 85.128843-92.946902C753.86149 783.279497 739.669256 696.178743 649.903813 626.301256zM677.16162 824.324308c-5.703909 19.967774-32.117488 42.3659-55.776328 55.714929-20.344351 11.498892-43.61638 17.324574-69.186755 17.324574-109.762893 0-248.604054-108.716051-337.635787-264.361947-74.880431-130.931005-104.456027-273.837762-77.16752-372.956224 12.891611-46.850028 36.966936-80.512708 71.535243-100.04353 19.926842-11.245112 49.625234-18.311041 75.387991-18.311041 3.415796 0 6.771217 0.132006 10.014074 0.38681 30.337959 2.379187 80.166831 51.892881 90.90336 135.191028 6.557346 50.885947-2.358721 97.44024-23.231097 121.455189-2.134617 2.297322-9.577123 7.42204-35.431977 15.911388-30.856775 10.126638-28.996404 31.253818-26.759457 39.905872 8.083096 31.05018 27.206642 77.756945 43.554982 106.35733 11.915377 20.822235 33.103956 50.163493 39.315424 58.664098 26.810622 36.69269 34.547841 46.290279 52.146661 46.290279 9.780761 0 15.962553-3.730974 27.175943-10.502192 9.018398-5.438872 36.459377-22.001083 47.723931-22.001083 29.758768 0 67.813478 15.789615 101.802594 42.244126C676.755368 726.365252 688.203094 785.709849 677.16162 824.324308z"
                    fill="#6276eb"
                    p-id="17768"
                  ></path>
                  <path
                    d="M540.852118 282.392602c-17.252943 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.252943 13.979386 31.233352 31.233352 31.233352 17.252943 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C572.08547 296.371988 558.105061 282.392602 540.852118 282.392602z"
                    fill="#6276eb"
                    p-id="17769"
                  ></path>
                  <path
                    d="M784.626167 282.392602c-17.252943 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.252943 13.979386 31.233352 31.233352 31.233352s31.233352-13.979386 31.233352-31.233352l0-30.470989C815.859519 296.371988 801.880133 282.392602 784.626167 282.392602z"
                    fill="#6276eb"
                    p-id="17770"
                  ></path>
                  <path
                    d="M739.761354 423.835008c-14.304797-9.393951-33.592073-5.398964-43.158962 8.763594-0.132006 0.193405-13.614066 19.754926-34.171264 19.754926-19.98824 0-32.432667-18.117636-33.266661-19.378349-9.181103-14.407128-28.294416-18.819624-42.833551-9.750061-14.650675 9.099239-19.154245 28.355815-10.044774 43.00649 11.214413 18.046005 41.968857 48.588625 86.144986 48.588625 43.962258 0 75.103512-30.318516 86.571704-48.222281C758.224868 452.201056 754.035452 433.240215 739.761354 423.835008z"
                    fill="#6276eb"
                    p-id="17771"
                  ></path>
                  <path
                    d="M586.045413 64.482617c-37.821397 0-75.154677 5.571902-110.962208 16.562211-16.480346 5.063319-25.752524 22.540366-20.690228 39.030945 5.063319 16.470113 22.468734 25.752524 39.030945 20.690228 29.849842-9.17087 61.022819-13.81668 92.621491-13.81668 171.863253 0 311.679625 138.057309 311.679625 307.755246 0 90.191138-39.885406 175.543062-109.427248 234.17646-13.186324 11.122315-14.864546 30.826076-3.751441 44.013423 6.181793 7.329942 15.006785 11.102872 23.902386 11.102872 7.106862 0 14.253632-2.409886 20.110013-7.350408 83.654258-70.52831 131.63197-173.296905 131.63197-281.941324C960.190719 230.56112 792.354176 64.482617 586.045413 64.482617z"
                    fill="#6276eb"
                    p-id="17772"
                  ></path>
                </svg>
              </template>
              <template #svgmove>
                <svg
                  t="1687953858238"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="17767"
                  width="45"
                  height="45"
                >
                  <path
                    d="M649.903813 626.301256c-45.25367-35.218106-96.342232-55.420217-140.172483-55.420217-22.194488 0-45.985334 11.274788-67.753103 23.760147-13.888312-18.381649-34.242895-47.042409-44.388976-64.753793-9.42465-16.511046-20.577664-41.72531-28.732391-64.164369 15.890922-6.52767 30.378891-14.619976 40.250726-25.986861 33.235962-38.217417 47.114041-100.348476 38.08541-170.4603-12.983709-100.754728-77.981049-183.992501-147.970076-189.482539-40.11872-3.090385-87.640036 6.974855-121.008005 25.813922-48.883337 27.613918-83.827197 75.286684-101.04944 137.854695-32.005948 116.311029-0.914836 273.522584 83.166141 420.548148 101.212146 176.936805 258.68976 295.819402 391.866922 295.819402 36.468586 0 70.081125-8.550747 99.901291-25.397437 16.379039-9.231245 70.925353-43.250036 85.128843-92.946902C753.86149 783.279497 739.669256 696.178743 649.903813 626.301256zM677.16162 824.324308c-5.703909 19.967774-32.117488 42.3659-55.776328 55.714929-20.344351 11.498892-43.61638 17.324574-69.186755 17.324574-109.762893 0-248.604054-108.716051-337.635787-264.361947-74.880431-130.931005-104.456027-273.837762-77.16752-372.956224 12.891611-46.850028 36.966936-80.512708 71.535243-100.04353 19.926842-11.245112 49.625234-18.311041 75.387991-18.311041 3.415796 0 6.771217 0.132006 10.014074 0.38681 30.337959 2.379187 80.166831 51.892881 90.90336 135.191028 6.557346 50.885947-2.358721 97.44024-23.231097 121.455189-2.134617 2.297322-9.577123 7.42204-35.431977 15.911388-30.856775 10.126638-28.996404 31.253818-26.759457 39.905872 8.083096 31.05018 27.206642 77.756945 43.554982 106.35733 11.915377 20.822235 33.103956 50.163493 39.315424 58.664098 26.810622 36.69269 34.547841 46.290279 52.146661 46.290279 9.780761 0 15.962553-3.730974 27.175943-10.502192 9.018398-5.438872 36.459377-22.001083 47.723931-22.001083 29.758768 0 67.813478 15.789615 101.802594 42.244126C676.755368 726.365252 688.203094 785.709849 677.16162 824.324308z"
                    fill="#e6e6e6"
                    p-id="17768"
                  ></path>
                  <path
                    d="M540.852118 282.392602c-17.252943 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.252943 13.979386 31.233352 31.233352 31.233352 17.252943 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C572.08547 296.371988 558.105061 282.392602 540.852118 282.392602z"
                    fill="#e6e6e6"
                    p-id="17769"
                  ></path>
                  <path
                    d="M784.626167 282.392602c-17.252943 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.252943 13.979386 31.233352 31.233352 31.233352s31.233352-13.979386 31.233352-31.233352l0-30.470989C815.859519 296.371988 801.880133 282.392602 784.626167 282.392602z"
                    fill="#e6e6e6"
                    p-id="17770"
                  ></path>
                  <path
                    d="M739.761354 423.835008c-14.304797-9.393951-33.592073-5.398964-43.158962 8.763594-0.132006 0.193405-13.614066 19.754926-34.171264 19.754926-19.98824 0-32.432667-18.117636-33.266661-19.378349-9.181103-14.407128-28.294416-18.819624-42.833551-9.750061-14.650675 9.099239-19.154245 28.355815-10.044774 43.00649 11.214413 18.046005 41.968857 48.588625 86.144986 48.588625 43.962258 0 75.103512-30.318516 86.571704-48.222281C758.224868 452.201056 754.035452 433.240215 739.761354 423.835008z"
                    fill="#e6e6e6"
                    p-id="17771"
                  ></path>
                  <path
                    d="M586.045413 64.482617c-37.821397 0-75.154677 5.571902-110.962208 16.562211-16.480346 5.063319-25.752524 22.540366-20.690228 39.030945 5.063319 16.470113 22.468734 25.752524 39.030945 20.690228 29.849842-9.17087 61.022819-13.81668 92.621491-13.81668 171.863253 0 311.679625 138.057309 311.679625 307.755246 0 90.191138-39.885406 175.543062-109.427248 234.17646-13.186324 11.122315-14.864546 30.826076-3.751441 44.013423 6.181793 7.329942 15.006785 11.102872 23.902386 11.102872 7.106862 0 14.253632-2.409886 20.110013-7.350408 83.654258-70.52831 131.63197-173.296905 131.63197-281.941324C960.190719 230.56112 792.354176 64.482617 586.045413 64.482617z"
                    fill="#e6e6e6"
                    p-id="17772"
                  ></path>
                </svg>
              </template>
            </card>
          </el-col>
        </el-row>
      </div>
      <div style="margin-top: 15px">
        <el-row>
          <el-col :span="8">
            <rfmCompare height="220px" ref="rfmRef"></rfmCompare>
            <ageRing height="220px" ref="cenRef"></ageRing>
          </el-col>
          <el-col :span="11">
            <Calendar ref="calendarRef"> </Calendar>
          </el-col>
          <el-col :span="5">
            <clvInfoCards
              height="580px"
              ref="clvInfoCardsRef"
              @updateClvInfo="updateClvInfo"
            ></clvInfoCards>
          </el-col>
        </el-row>
        <el-row>
          <el-col :span="8">
            <funnel height="400px" ref="funnelRef"></funnel>
          </el-col>
          <el-col :span="16">
            <timePeried height="400px" ref="timePeriedRef"></timePeried>
          </el-col>
        </el-row>
      </div>
    </template>
  </Layout>
</template>

<script setup>
import Calendar from "@/components/echarts/basePersonal/mpvue-calendar.vue";
import rfmCompare from "@/components/echarts/basePersonal/rfmCompare.vue";
import Layout from "@/layout/Layout.vue";
import { ElLoading } from "element-plus";
import { get, post } from "@/utils/axiosConfig/axios";
import { onMounted, ref, watch } from "vue";
import ageRing from "@/components/echarts/basePersonal/ageRing.vue";
import timePeried from "@/components/echarts/basePersonal/timePeried.vue";
import clvInfoCards from "@/components/echarts/basePersonal/clvInfoCards.vue";
import funnel from "@/components/echarts/basePersonal/loudou.vue";
import router from "@/router";
import { setCardInfoConfig } from "@/utils/js/echartsConfig/basePersonal/cardInfoConfig";
import {
  render,
  getBase64,
  resizeBase64,
} from "@/utils/js/generateReport/render";
import axios from "axios";

let addressBind;
const analysisVisible = ref(false);
const calendarRef = ref();
const clvInfoCardsRef = ref();
const timePeriedRef = ref();
const cenRef = ref();
const funnelRef = ref();
const rfmRef = ref();
const model = ref("1");
const time_window = ref(1);
const resultVisible = ref(false);
const timeWindowVisible = ref(false);
const ruleLoading = ref(true);
const statusLoading = ref(true);
const rfm = ref("重要价值客户");
const time = ref("1");
const load = ref(true);
const disabled = ref(true);
const forecast = ref({
  Price: {
    prediction: 0,
    warn: true,
  },
  Loss: {
    prediction: 0,
    warn: true,
  },
  Back: {
    time_window: 1,
    gender: 1,
    rfm_tag: 1,
    prediction: 0,
    cityVec: 1,
    provinceVec: 1,
    show: false,
    warn: true,
  },
  PriceLoading: false,
  LossLoading: false,
  BackLoading: false,
});
const forecastGPT = ref({
  forecastLoss: 0.0,
  forecastPrice: 0.0,
  forecastBack: 0.0,
  avgdiff: 0.0,
  clvUid: 0,
});
const cardInfo = ref({
  frequencyNum: 0,
  consumptionCapacityNum: 0,
  recencyNum: 0,
});
const ruleInfo = ref({
  userId: 1,
  activeTime: "晚上",
  activeTimeNum: 31,
  priceLike: "500-2500",
  priceLikeNum: 17,
  cumulativePurchases: 30,
  cumulativeCart: 1,
  cumulativeView: 0,
  cumulativeWatch: 0,
  cumulativeInquire: 0,
  cumulativeComment: 0,
  cumulativeComplaint: 0,
});
const userInfo = ref({
  userId: null,
  gender: null,
  age: null,
  province: null,
  city: null,
  county: null,
  rfmTag: "无身份信息",
  userValue: "无身份信息",
  status: "正常用户",
});
const userAnalysisRef = ref();
watch(
  [() => clvInfoCardsRef.value, cardInfo, userInfo, ruleInfo],
  (nv, ov) => {
    forecastGPT.value = nv[0]?.cardInfo ?? {
      forecastLoss: 0.0,
      forecastPrice: 0.0,
      forecastBack: 0.0,
      avgdiff: 0.0,
      clvUid: 0,
    };
  },
  {
    deep: true,
    immediate: true,
  }
);
const docxUpload = () => {
  document.getElementById("module").click();
};

const docxChange = (e) => {
  if (e.target.files[0] == null) {
    return;
  }
  const loading = ElLoading.service({
    lock: true,
    text: "导出中...",
    background: "rgba(0, 0, 0, 0.7)",
  });
  let proc = [];
  proc.push(
    new Promise((resolve, reject) => {
      loading.setText("正在获取用户交易偏好分布...");
      let [echart, data] = cenRef.value.getEcharts();
      getBase64(echart, {
        maxHeight: 325,
        maxWidth: 670,
      })
        .then((base64) => {
          resolve({
            name: "cenRef",
            value: base64,
            data: data,
          });
        })
        .catch((err) => {
          resolve({
            name: "cenRef",
            value: "default",
            data: [],
          });
        });
    })
  );

  proc.push(
    new Promise((resolve, reject) => {
      loading.setText("正在统计用户每日操作行为...");
      let [echart, xData, data] = calendarRef.value.getEcharts();
      getBase64(echart, {
        maxHeight: 325,
        maxWidth: 670,
      })
        .then((base64) => {
          resolve({
            name: "calendarRef",
            value: base64,
            xData: xData,
            data: data,
          });
        })
        .catch((err) => {
          resolve({
            name: "calendarRef",
            value: "default",
            xData: [],
            data: [],
          });
        });
    })
  );

  proc.push(
    new Promise((resolve, reject) => {
      loading.setText("正在预测用户信息...");
      let type = [1, 7, 14, 30, 60],
        tProc = [];
      type.forEach((e) => {
        tProc.push(
          new Promise((resolve1, reject1) => {
            setCardInfoConfig(model.value, userInfo.value.userId, e).then(
              (res) => {
                resolve1({
                  time_window: e,
                  data: res,
                });
              }
            );
          })
        );
      });
      let forecastT = [];
      Promise.all(tProc).then((res) => {
        res.forEach((e) => {
          forecastT.push({
            price: parseFloat(e.data.forecastPrice).toFixed(2),
            loss: parseFloat(e.data.forecastLoss).toFixed(2),
            back: parseFloat(e.data.forecastBack).toFixed(2),
            time_window: e.time_window,
          });
        });

        resolve({
          name: "forecast",
          value: forecastT,
        });
      });
    })
  );
  Promise.all(proc).then((procData) => {
    let images = {
      calendarRef: {
        base64: null,
        userActionTable: [],
      },
      cenRef: {
        base64: null,
        description: "",
      },
      forecast: [],
    };
    procData.forEach((data) => {
      switch (data.name) {
        case "calendarRef":
          for (let info of data.data) {
            let dateStr = info.data
              .map((e) => {
                return `${e[0]}(${e[1]}次)`;
              })
              .join(",");

            images.calendarRef.userActionTable.push({
              actionName: info.name,
              actionDate: dateStr,
            });
          }
          images.calendarRef.base64 = data.value;
          break;

        case "cenRef":
          data.data.price.sort((a, b) => b.value - a.value);
          data.data.date.sort((a, b) => b.value - a.value);
          let price = data.data.price,
            date = data.data.date;
          images.cenRef.base64 = data.value;
          images.cenRef.description = `该用户交易时间集中活跃在${
            date[0].name
          }附近，总共交易过${date[0].value}次,${
            date[1].value == 0
              ? "，未曾在其他时间下过订单"
              : `，其次活跃于${date[1].name},交易过${date[1].value}次`
          }。用户购买价格偏好在${price[0].name}摇摆,总共购买过${
            price[0].value
          }次,${
            price[1].value == 0
              ? "，未曾在其他价格段下交易过"
              : `，其次偏好于${price[1].name},交易过${price[1].value}次`
          }。`;
          break;
        case "forecast":
          images.forecast = data.value;
          break;
      }
    });
    render(
      e.target.files[0],
      {
        sex: userInfo.value.gender,
        address: `${userInfo.value.province}${userInfo.value.city}${userInfo.value.county}`,
        age: userInfo.value.age,
        consumption: cardInfo.value.consumptionCapacityNum,
        recency: cardInfo.value.recencyNum,
        frequency: cardInfo.value.frequencyNum,
        activeTime: ruleInfo.value.activeTime,
        activePrice: ruleInfo.value.priceLike,
        activeTimeCount: ruleInfo.value.activeTimeNum,
        activePriceCount: ruleInfo.value.priceLikeNum,
        view: ruleInfo.value.cumulativeView,
        buy: ruleInfo.value.cumulativePurchases,
        cart: ruleInfo.value.cumulativeCart,
        comment: ruleInfo.value.cumulativeComment,
        complain: ruleInfo.value.cumulativeComplaint,
        consult: ruleInfo.value.cumulativeInquire,
        rfm: userInfo.value.rfmTag,
        clv: userInfo.value.userValue,
        status: userInfo.value.status,
        userId: userInfo.value.userId,
        RingImg: images.cenRef.base64,
        ActionImg: images.calendarRef.base64,
        actionDescribtioon: images.cenRef.description,
        userActionTable: images.calendarRef.userActionTable,
        forecast: images.forecast,
      },
      loading
    );
    loading.close();
  });
};
const aOpen = (f) => {
  if (f) {
    resultVisible.value = true;
  } else {
    resultVisible.value = false;
  }
};
const timeChange = (val) => {
  getRuleInfo(userInfo.value.userId);
};
const doForecast = () => {
  getforecast();
};
const getUserInfo = async (id) => {
  disabled.value = true;
  await get({
    url: "/base-user-tag/getById",
    params: {
      userId: id,
    },
  }).then((data) => {
    data.gender = data.gender != "female" ? "男" : "女";
    userInfo.value.age = data.age;
    userInfo.value.gender = data.gender;
    userInfo.value.province = data.province;
    userInfo.value.city = data.city;
    userInfo.value.county = data.county;
    userInfo.value.userId = data.userId;
    disabled.value = false;
  });
};
const updateClvInfo = (clvInfo) => {
  userInfo.value.rfmTag = clvInfo.rfmTag ? clvInfo.rfmTag : "无身份信息";
  userInfo.value.userValue = clvInfo.userValue
    ? clvInfo.userValue
    : "无身份信息";
};
const userChange = (e) => {
  var keyCode = window.event ? e.keyCode : e.which;
  let id = userInfo.value.userId;

  if (keyCode == 13) {
    if ((id + "").match("^[0-9]*[1-9][0-9]*$")) {
      getUserInfo(id);
      getRuleInfo(id);
      clvInfoCardsRef.value.chartDraw(model.value, id);
      calendarRef.value.getEvents(id);
      calendarRef.value.chartDraw(id);
      cenRef.value.chartDraw(id);
      funnelRef.value.chartDraw(id);
      loadCardInfo(model.value, id);
      getIdentity(id);
    } else {
    }
  }
};
const getIdentity = (id) => {
  statusLoading.value = true;
  get({
    url: "/user-identity/getById",
    params: {
      id: id,
    },
  }).then((res) => {
    statusLoading.value = false;
    if (res == null) {
      userInfo.value.status = "正常交易用户";
    } else {
      if (res.isLoss == 1) {
        userInfo.value.status = "流失用户";
      } else if (res.isBack == 1) {
        userInfo.value.status = "回归用户";
      } else {
        userInfo.value.status = "正常交易用户";
      }
    }
  });
};

const getforecast = () => {
  let proc = [],
    apis = ["price", "loss", "back"],
    data = {},
    tagEnum = {
      新客户: 1,
      重要价值客户: 2,
      一般维持客户: 3,
      潜力客户: 4,
      重要深耕客户: 5,
      流失客户: 6,
      重要唤回客户: 7,
      重要挽留客户: 8,
    };
  loading(true);
  forecast.value.Back.show = false;
  apis.forEach((e) => {
    proc.push(
      new Promise((resolve, reject) => {
        axios
          .post(
            `http://116.204.124.17:9999/api/v1/forecast/${e}`,
            {
              age: userInfo.value.age,
              city: userInfo.value.city,
              gender: userInfo.value.gender == "女" ? 1 : 0,
              id: userInfo.value.userId,
              province: userInfo.value.province,
              rfm_tag: tagEnum[userInfo.value.rfmTag],
              time_window: time_window.value,
            },
            {
              params: {
                model_time_window: model.value,
              },
            }
          )
          .then((res) => {
            if (res.data.code == 200) {
              res = res.data.data;
            }
            let t = res;

            t.prediction =
              parseFloat(res.prediction).toFixed(3) +
              (e == "price" ? "元" : "%");
            t.warn = false;
            data[e] = t;
            resolve(data);
          })
          .catch((err) => {
            data[e] = {
              prediction: "推理错误,特征转换失败",
              warn: true,
            };
            resolve(data);
          });
      })
    );
  });

  Promise.all(proc).then((e) => {
    loading(false);
    forecast.value.Back.show = true;
    forecast.value.Back = data.back;
    forecast.value.Loss = data.loss;
    forecast.value.Price = data.price;
  });
};
const getRuleInfo = (id) => {
  ruleLoading.value = true;
  get({
    url: "/rule-user-tag/getById",
    params: {
      userId: id,
      type: time.value,
    },
  }).then((res) => {
    console.error(res);
    ruleLoading.value = false;
    ruleInfo.value =
      res == null
        ? {
            activeTime: "上午",
            activeTimeNum: 0,
            priceLike: "<10",
            priceLikeNum: 0,
            cumulativePurchases: 0,
            cumulativeCart: 0,
            cumulativeView: 0,
            cumulativeWatch: 0,
            cumulativeInquire: 0,
            cumulativeComment: 0,
            cumulativeComplaint: 0,
          }
        : res;
  });
};

const modelChange = (val) => {
  clvInfoCardsRef.value.chartDraw(val, userInfo.value.userId);
  genderPiesRef.value.chartDraw(addressBind, val, rfm.value);
  rfmRef.value.chartDraw(val, userInfo.value.userId);
  timePeriedRef.value.chartDraw(addressBind, val, rfm.value);
  loadCardInfo(val, userInfo.value.userId);
};

const loadCardInfo = (time, id) => {
  load.value = true;
  get({
    url: "/getUserById",
    params: {
      time: time,
      userId: id,
    },
  })
    .then((res) => {
      load.value = false;
      cardInfo.value =
        res[0] == null
          ? {
              frequencyNum: 0,
              consumptionCapacityNum: 0,
              recencyNum: 0,
            }
          : res[0];
    })
    .catch((err) => {
      load.value = false;
    });
};

const loading = (f) => {
  forecast.value.BackLoading = f;
  forecast.value.LossLoading = f;
  forecast.value.PriceLoading = f;
};
onMounted(() => {
  let id =
    router.currentRoute.value.query.id == null
      ? 1
      : router.currentRoute.value.query.id;
  loadCardInfo(model.value, id);
  getUserInfo(id);
  getIdentity(id);
  getRuleInfo(id);

  document.title
  console.error(clvInfoCardsRef.value.cardInfo);
});
</script>

<style scoped>
.p_h {
  padding: 5px;
  padding-left: 10px;
  border-left: 3px orange solid;
  margin: 15px 10px;
  font-weight: 500;
  font-size: 17px;
}

/deep/ input::-webkit-outer-spin-button,
/deep/ input::-webkit-inner-spin-button {
  -webkit-appearance: none !important;
}

/deep/ input[type="number"] {
  -moz-appearance: textfield !important;
}

.el-descriptions {
  margin-top: 20px;
}

.cell-item {
  display: flex;
  align-items: center;
}

.margin-top {
  margin-top: 20px;
}

#module {
  opacity: 0;
  width: 0px;
}

button {
  color: #3280da;
  border: #3280da 1px solid;
  padding: 1px 6px 1px;
  font-size: 0.1rem;
  background-color: rgba(0, 0, 0, 0);
  cursor: pointer;
}
</style>
